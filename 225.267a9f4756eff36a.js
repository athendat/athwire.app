"use strict";(self.webpackChunkath=self.webpackChunkath||[]).push([[225],{5736:(I,v,i)=>{i.d(v,{AR:()=>d,pT:()=>g,$w:()=>a,SX:()=>_});const d={_id:null,userId:null,active:!0,owner:null,currency:null,name:null,balance:0,createdAt:null,updatedAt:null},g={_id:null,userId:null,createdAt:null,accountId:null,transactionId:null,invoiceNo:null,amount:null,fincimexTax:null,sendFincimex:null,senderName:null,lastName1:null,lastName2:null,senderAddress:null,idNumber:null,beneficiary:null},a={_id:null,accountId:null,userId:null,reference:null,date:null,valueDate:null,description:null,origin:null,destiny:null,accountOrigin:null,accountDestiny:null,operationType:null,currency:null,initBalance:null,amount:null,endBalance:null},_={_id:null,active:!0,name:null,lastname:null,email:null,password:null,roles:[null]}},7681:(I,v,i)=>{i.d(v,{$c:()=>_,EW:()=>p,$G:()=>l});var d=i(7078),g=i(5e3),a=i(5620);let _=(()=>{class c{constructor(s){this.store=s}resolve(s,T){return this.store.dispatch((0,d.vP)())}}return c.\u0275fac=function(s){return new(s||c)(g.LFG(a.yh))},c.\u0275prov=g.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),p=(()=>{class c{constructor(s){this.store=s}resolve(s,T){const Z=s.params.accountId;if("new"!==Z)return this.store.dispatch((0,d.Mx)({accountId:Z}))}}return c.\u0275fac=function(s){return new(s||c)(g.LFG(a.yh))},c.\u0275prov=g.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})(),l=(()=>{class c{constructor(s){this.store=s}resolve(s,T){const Z=s.params.accountId;if("new"!==Z)return this.store.dispatch((0,d.vg)({accountId:Z}))}}return c.\u0275fac=function(s){return new(s||c)(g.LFG(a.yh))},c.\u0275prov=g.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},6596:(I,v,i)=>{i.d(v,{bk:()=>a,L3:()=>_,Cj:()=>p});var d=i(5620);const g=l=>l.account,a=(0,d.P1)(g,l=>l.account),_=(0,d.P1)(g,l=>l.accounts),p=(0,d.P1)(g,l=>l.operations)},8225:(I,v,i)=>{i.r(v),i.d(v,{InvoicesModule:()=>ye});var d=i(5357),g=i(2455),a=i(3075),_=i(6087),p=i(4847),l=i(7579),c=i(2722),m=i(5620);const s=t=>t.invoice,Z=((0,m.P1)(s,t=>t.invoice),(0,m.P1)(s,t=>t.invoices));var q=i(5700),h=i(5736),e=i(5e3),C=i(7967),E=i(1927),U=i(5303),F=i(5245),Q=i(7423),N=i(2181),x=i(9808),D=i(7238);function R(t,r){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",34),e.TgZ(2,"div",35),e._uU(3),e.qZA(),e.TgZ(4,"div",36),e._uU(5),e.qZA(),e.TgZ(6,"div",36),e._uU(7),e.qZA(),e.TgZ(8,"div",36),e._uU(9),e.qZA(),e.TgZ(10,"div",36),e._uU(11),e.qZA(),e.TgZ(12,"div",36),e._uU(13),e.qZA(),e.TgZ(14,"div",36),e._uU(15),e.qZA(),e.TgZ(16,"div",36),e._uU(17," Test "),e.qZA(),e.TgZ(18,"div",36),e._uU(19),e.ALo(20,"date"),e.qZA(),e.TgZ(21,"div",36),e._uU(22),e.qZA(),e.TgZ(23,"div",36),e._uU(24),e.qZA(),e.TgZ(25,"div",37),e.TgZ(26,"button",38),e.NdJ("click",function(){const f=e.CHM(n).$implicit;return e.oxw(4).navigateToInvoice(f._id)}),e._UZ(27,"mat-icon",21),e.qZA(),e.TgZ(28,"button",39),e.NdJ("click",function(){const f=e.CHM(n).$implicit;return e.oxw(4).editInvoice(f)}),e._UZ(29,"mat-icon",21),e.qZA(),e.TgZ(30,"button",40),e.NdJ("click",function(){const f=e.CHM(n).$implicit;return e.oxw(4).deleteInvoice(f)}),e._UZ(31,"mat-icon",21),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&t){const n=r.$implicit;e.xp6(3),e.hij(" ",n.invoiceNo," "),e.xp6(2),e.lnq(" ",n.senderName," ",n.lastName1," ",n.lastName2," "),e.xp6(2),e.lnq(" ",n.beneficiary.name," ",n.beneficiary.lastName1," ",n.beneficiary.lastName2," "),e.xp6(2),e.hij(" ",n.beneficiary.cardNo," "),e.xp6(2),e.hij(" ",n.amount," "),e.xp6(2),e.hij(" ",n.fincimexTax," "),e.xp6(2),e.hij(" ",n.beneficiary.idNumber," "),e.xp6(4),e.hij(" ",e.xi3(20,17,n.createdAt,"medium")," "),e.xp6(3),e.hij(" ",n.accountId," "),e.xp6(2),e.hij(" ",n.transactionId," "),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:eye"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Y(t,r){if(1&t&&(e.ynx(0),e.YNc(1,R,32,20,"ng-container",33),e.BQk()),2&t){const n=r.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",n)("ngForTrackBy",o.trackByFn)}}function O(t,r){if(1&t&&(e.ynx(0),e.TgZ(1,"div",27),e.TgZ(2,"div",28),e.TgZ(3,"div",29),e._uU(4," No.Factura "),e.qZA(),e.TgZ(5,"div",30),e._uU(6," Remesante "),e.qZA(),e.TgZ(7,"div",30),e._uU(8," Beneficiario "),e.qZA(),e.TgZ(9,"div",31),e._uU(10," Tarjeta "),e.qZA(),e.TgZ(11,"div",31),e._uU(12," Importe "),e.qZA(),e.TgZ(13,"div",31),e._uU(14," TAX Fincimex "),e.qZA(),e.TgZ(15,"div",31),e._uU(16," Estado "),e.qZA(),e.TgZ(17,"div",31),e._uU(18," Fecha y Hora "),e.qZA(),e.TgZ(19,"div",31),e._uU(20," Cuenta "),e.qZA(),e.TgZ(21,"div",31),e._uU(22," ID Transacci\xf3n "),e.qZA(),e.TgZ(23,"div",32),e._uU(24," Acciones "),e.qZA(),e.qZA(),e.YNc(25,Y,2,2,"ng-container",24),e.ALo(26,"async"),e.qZA(),e.BQk()),2&t){const n=e.oxw(2);e.xp6(25),e.Q6J("ngIf",e.lcZ(26,1,n.invoices$))}}function S(t,r){if(1&t&&(e.ynx(0),e.YNc(1,O,27,3,"ng-container",26),e.BQk()),2&t){const n=r.ngIf;e.oxw();const o=e.MAs(38);e.xp6(1),e.Q6J("ngIf",!n.length>0)("ngIfElse",o)}}function L(t,r){1&t&&(e.TgZ(0,"div",41),e._uU(1,"A\xfan no ha creado ninguna factura!"),e.qZA())}let B=(()=>{class t{constructor(n,o,u,f,A){this._athConfirmationService=n,this._changeDetectorRef=o,this._fileSaverService=u,this._router=f,this.store=A,this.invoices=[],this.emptyInvoice=h.pT,this.searchInputControl=new a.NI,this.selectedInvoice=null,this._unsubscribeAll=new l.x}ngOnInit(){this.invoices$=this.store.select(Z),this.invoices$.pipe((0,c.R)(this._unsubscribeAll)).subscribe(n=>{this.invoices=n,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createInvoice(){this._router.navigateByUrl("/invoices/new")}exportAsExcelFile(){this._fileSaverService.exportAsExcelFile(this.invoices,"invoices")}exportAsCsvFile(){this._fileSaverService.exportAsCsvFile(this.invoices,"invoices")}trackByFn(n,o){return o.id||n}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(C.C),e.Y36(e.sBO),e.Y36(E.m),e.Y36(d.F0),e.Y36(m.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ath-invoices"]],viewQuery:function(n,o){if(1&n&&(e.Gf(_.NW,5),e.Gf(p.YE,5)),2&n){let u;e.iGM(u=e.CRH())&&(o._paginator=u.first),e.iGM(u=e.CRH())&&(o._sort=u.first)}},decls:39,vars:8,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pb-22","sm:pt-12","sm:pb-28","sm:px-10","bg-mine-50","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"whitespace-nowrap","text-primary-700"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["mat-button","",1,"ml-4","rounded-sm","bg-primary-700",3,"click"],[1,"text-mine-900",3,"svgIcon"],[1,"ml-2","mr-1","text-lg","text-mine-900"],[1,"flex-auto","p-6","-mt-16","bg-mine-200","shadow","sm:p-10","rounded-t-2xl","overflow-x-auto"],[1,"w-full","p-8","md:p-16","shadow","rounded-2xl","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-center","justify-between","mb-5"],[1,"text-2xl","font-semibold","leading-tight"],[1,"-mr-3"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["listInvoicesMenu","matMenu"],["mat-menu-item","",3,"click"],[4,"ngIf"],["noInvoices",""],[4,"ngIf","ngIfElse"],[1,"grid","overflow-x-auto"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","inline-flex","invoices-grid","gap-4","px-6","py-4","font-semibold","shadow","md:px-8","text-md","text-secondary","bg-mine-50","dark:bg-black","dark:bg-opacity-5"],[1,"hidden","truncate","sm:block","w-2/12"],[1,"hidden","truncate","sm:block","w-1/12"],[1,"hidden","text-center","sm:block","w-1/12"],[1,"text-center","w-1/12"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inline-flex","invoices-grid","items-center","gap-4","px-6","py-3","border-b","md:px-8"],[1,"truncate","w-2/12"],[1,"hidden","truncate","w-1/12","sm:block"],[1,"flex","flex-col","justify-center","gap-1","sm:flex-row","flex-wrap","w-1/12"],["mat-stroked-button","","matTooltip","Ver detalles",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["mat-stroked-button","","matTooltip","Editar",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["mat-stroked-button","","matTooltip","Eliminar",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e.TgZ(4,"div",3),e.TgZ(5,"div"),e.TgZ(6,"a",4),e._uU(7,"Facturas"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",5),e.TgZ(9,"a",6),e._UZ(10,"mat-icon",7),e.TgZ(11,"span",8),e._uU(12,"Regresar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",9),e.TgZ(14,"h2",10),e._uU(15," Registro de facturas "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",11),e.TgZ(17,"button",12),e.NdJ("click",function(){return o.createInvoice()}),e._UZ(18,"mat-icon",13),e.TgZ(19,"span",14),e._uU(20,"Nueva"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",15),e.TgZ(22,"div",16),e.TgZ(23,"div",17),e.TgZ(24,"div",18),e._uU(25,"Registro de facturas"),e.qZA(),e.TgZ(26,"div",19),e.TgZ(27,"button",20),e._UZ(28,"mat-icon",21),e.qZA(),e.TgZ(29,"mat-menu",null,22),e.TgZ(31,"button",23),e.NdJ("click",function(){return o.exportAsExcelFile()}),e._uU(32,"Exportar a excel"),e.qZA(),e.TgZ(33,"button",23),e.NdJ("click",function(){return o.exportAsCsvFile()}),e._uU(34,"Exportar a csv"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(35,S,2,2,"ng-container",24),e.ALo(36,"async"),e.YNc(37,L,2,0,"ng-template",null,25,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&n){const u=e.MAs(30);e.xp6(9),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(9),e.Q6J("matMenuTriggerFor",u),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:dots-vertical"),e.xp6(7),e.Q6J("ngIf",e.lcZ(36,6,o.invoices$))}},directives:[U.PQ,d.yS,F.Hw,Q.lW,N.p6,N.VK,N.OP,x.O5,p.YE,x.sg,D.gM],pipes:[x.Ov,x.uU],encapsulation:2,data:{animation:q.p},changeDetection:0}),t})();var M=i(4787),P=i(9646),j=i(9652),$=i(6596),G=i(1158),b=i(1125),y=i(7322),H=i(7531),z=i(4107),K=i(508),W=i(2368);function V(t,r){1&t&&(e.ynx(0),e.TgZ(1,"a",33),e._uU(2,"Nueva"),e.qZA(),e.BQk())}function X(t,r){if(1&t&&(e.ynx(0),e.TgZ(1,"a",33),e._uU(2),e.qZA(),e.BQk()),2&t){const n=e.oxw();e.xp6(2),e.Oqu(n.selectedInvoice.invoiceNo)}}function ee(t,r){1&t&&(e.ynx(0),e._uU(1," Nueva factura "),e.BQk())}function te(t,r){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.selectedInvoice.invoiceNo," ")}}const ne=function(t){return{"cursor-not-allowed":t}};function oe(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){return e.CHM(n),e.oxw().createInvoice()}),e._UZ(1,"mat-icon",35),e.TgZ(2,"span",36),e._uU(3,"Guardar"),e.qZA(),e.qZA()}if(2&t){const n=e.oxw();e.Q6J("ngClass",e.VKq(3,ne,n.invoiceForm.invalid))("disabled",n.invoiceForm.invalid),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function ie(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){return e.CHM(n),e.oxw().updateInvoice()}),e._UZ(1,"mat-icon",35),e.TgZ(2,"span",36),e._uU(3,"Actualizar"),e.qZA(),e.qZA()}2&t&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:refresh"))}function re(t,r){if(1&t&&(e.ynx(0),e.TgZ(1,"mat-option",38),e._uU(2),e.qZA(),e.BQk()),2&t){const n=r.$implicit;e.xp6(1),e.Q6J("value",n),e.xp6(1),e.Oqu(n.name)}}function ae(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identificaci\xf3n es obligatorio. "),e.qZA())}function ce(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre es obligatorio. "),e.qZA())}function le(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido es obligatorio. "),e.qZA())}function se(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n del remesante es obligatoria. "),e.qZA())}function me(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El monto es obligatorio. "),e.qZA())}function ue(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El monto m\xednimo debe ser mayor a 0. "),e.qZA())}function de(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El monto m\xe1ximo es de 10.000. "),e.qZA())}function pe(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identificaci\xf3n es obligatorio. "),e.qZA())}function ge(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero de identificaci\xf3n es incorrecto. "),e.qZA())}function Ze(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre es obligatorio. "),e.qZA())}function ve(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El primer apellido es obligatorio. "),e.qZA())}function fe(t,r){if(1&t&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&t){const n=r.$implicit;e.Q6J("value",n),e.xp6(1),e.hij(" ",n," ")}}function _e(t,r){if(1&t&&(e.TgZ(0,"mat-option",38),e._uU(1),e.qZA()),2&t){const n=r.$implicit;e.Q6J("value",n.city),e.xp6(1),e.hij("",n.city," ")}}function xe(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," La direcci\xf3n del remesante es obligatoria. "),e.qZA())}function Ae(t,r){if(1&t&&(e.TgZ(0,"mat-expansion-panel"),e.TgZ(1,"mat-expansion-panel-header",21),e.TgZ(2,"mat-panel-title",22),e.TgZ(3,"div",23),e._uU(4," Informaci\xf3n del Beneficiario "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div",39),e.TgZ(6,"div",40),e.TgZ(7,"mat-form-field",26),e.TgZ(8,"mat-label"),e._uU(9,"Depositar en"),e.qZA(),e.TgZ(10,"mat-select",28),e.TgZ(11,"mat-option",38),e._uU(12,"Tarjeta"),e.qZA(),e.TgZ(13,"mat-option",38),e._uU(14,"Cuenta"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",41),e.TgZ(16,"mat-form-field",26),e.TgZ(17,"mat-label"),e._uU(18,"N\xfamero de cuenta o de tarjeta"),e.qZA(),e._UZ(19,"input",27),e.qZA(),e.qZA(),e.TgZ(20,"div",40),e.TgZ(21,"mat-form-field",26),e.TgZ(22,"mat-label"),e._uU(23,"Importe (10.000 m\xe1x)"),e.qZA(),e._UZ(24,"input",27),e.YNc(25,me,2,0,"mat-error",7),e.YNc(26,ue,2,0,"mat-error",7),e.YNc(27,de,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(28,"div",40),e.TgZ(29,"mat-form-field",26),e.TgZ(30,"mat-label"),e._uU(31,"Comisi\xf3n de Fincimex"),e.qZA(),e._UZ(32,"input",27),e.qZA(),e.qZA(),e.TgZ(33,"div",25),e.TgZ(34,"div",42),e.TgZ(35,"span",43),e._uU(36,"\xbfEnviar a Fincimex?"),e.qZA(),e.TgZ(37,"mat-slide-toggle",44),e._uU(38),e.qZA(),e.qZA(),e.qZA(),e.TgZ(39,"div",40),e.TgZ(40,"mat-form-field",26),e.TgZ(41,"mat-label"),e._uU(42,"N\xfamero de Identidad o Pasaporte"),e.qZA(),e._UZ(43,"input",27),e.YNc(44,pe,2,0,"mat-error",7),e.YNc(45,ge,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(46,"div",40),e.TgZ(47,"mat-form-field",26),e.TgZ(48,"mat-label"),e._uU(49,"Nombre"),e.qZA(),e._UZ(50,"input",30),e.YNc(51,Ze,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(52,"div",40),e.TgZ(53,"mat-form-field",26),e.TgZ(54,"mat-label"),e._uU(55,"Primer Apellido"),e.qZA(),e._UZ(56,"input",27),e.YNc(57,ve,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(58,"div",40),e.TgZ(59,"mat-form-field",26),e.TgZ(60,"mat-label"),e._uU(61,"Segundo Apellido"),e.qZA(),e._UZ(62,"input",45),e.qZA(),e.qZA(),e.TgZ(63,"div",25),e.TgZ(64,"mat-form-field",26),e.TgZ(65,"mat-label"),e._uU(66,"Provincia"),e.qZA(),e._UZ(67,"mat-icon",46),e.TgZ(68,"mat-select",28),e.YNc(69,fe,2,2,"mat-option",47),e.qZA(),e.qZA(),e.qZA(),e.TgZ(70,"div",25),e.TgZ(71,"mat-form-field",26),e.TgZ(72,"mat-label"),e._uU(73,"Municipio"),e.qZA(),e._UZ(74,"mat-icon",46),e.TgZ(75,"mat-select",28),e.YNc(76,_e,2,2,"mat-option",47),e.qZA(),e.qZA(),e.qZA(),e.TgZ(77,"div",31),e.TgZ(78,"mat-form-field",26),e.TgZ(79,"mat-label"),e._uU(80,"Direcci\xf3n"),e.qZA(),e._UZ(81,"textarea",32),e.YNc(82,xe,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(83,"div",25),e.TgZ(84,"mat-form-field",26),e.TgZ(85,"mat-label"),e._uU(86,"Reparto o Consejo Popular"),e.qZA(),e._UZ(87,"input",27),e.qZA(),e.qZA(),e.TgZ(88,"div",25),e.TgZ(89,"mat-form-field",26),e.TgZ(90,"mat-label"),e._uU(91,"Tel\xe9fono"),e.qZA(),e._UZ(92,"input",27),e.qZA(),e.qZA(),e.TgZ(93,"div",31),e.TgZ(94,"mat-form-field",26),e.TgZ(95,"mat-label"),e._uU(96,"Observaciones"),e.qZA(),e._UZ(97,"textarea",48),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(9),e.Q6J("formControlName","destiny"),e.xp6(1),e.Q6J("value","Tarjeta"),e.xp6(2),e.Q6J("value","Cuenta"),e.xp6(6),e.Q6J("type","text")("formControlName","cardNo"),e.xp6(5),e.Q6J("type","number")("formControlName","amount"),e.xp6(1),e.Q6J("ngIf",n.invoiceForm.get("amount").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.invoiceForm.get("amount").hasError("min")),e.xp6(1),e.Q6J("ngIf",n.invoiceForm.get("amount").hasError("max")),e.xp6(5),e.Q6J("type","number")("formControlName","fincimexTax"),e.xp6(5),e.Q6J("formControlName","sendFincimex")("color","primary"),e.xp6(1),e.hij(" ",!0===n.invoiceForm.get("sendFincimex").value?"Enviar":"No enviar"," "),e.xp6(5),e.Q6J("type","text")("formControlName","beneficiaryIdNumber"),e.xp6(1),e.Q6J("ngIf",n.invoiceForm.get("beneficiaryIdNumber").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.invoiceForm.get("beneficiaryIdNumber").hasError("maxLength")),e.xp6(5),e.Q6J("type","text")("formControlName","beneficiaryName")("placeholder","Nombre"),e.xp6(1),e.Q6J("ngIf",n.invoiceForm.get("beneficiaryName").hasError("required")),e.xp6(5),e.Q6J("type","text")("formControlName","beneficiaryLastName1"),e.xp6(1),e.Q6J("ngIf",n.invoiceForm.get("beneficiaryLastName1").hasError("required")),e.xp6(5),e.Q6J("type","text")("formControlName","beneficiaryLastName2"),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:map"),e.xp6(1),e.Q6J("formControlName","beneficiaryState"),e.xp6(1),e.Q6J("ngForOf",n.states),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:location-marker"),e.xp6(1),e.Q6J("formControlName","beneficiaryCity"),e.xp6(1),e.Q6J("ngForOf",n.cities),e.xp6(5),e.Q6J("placeholder","Direcci\xf3n del remesante")("formControlName","beneficiaryAddress"),e.xp6(1),e.Q6J("ngIf",n.invoiceForm.get("beneficiaryAddress").hasError("required")),e.xp6(5),e.Q6J("type","text")("formControlName","beneficiaryTown"),e.xp6(5),e.Q6J("type","text")("formControlName","beneficiaryPhoneNumber"),e.xp6(5),e.Q6J("placeholder","Escriba cualquier comentario que considere oportuno")("formControlName","beneficiaryNote")}}const Te=(0,j.kP)("1234567890GHIJKL",8);let he=(()=>{class t{constructor(n,o,u,f,A,Ne,Ce){this._activatedRoute=n,this._athConfirmationService=o,this._changeDetectorRef=u,this._formBuilder=f,this._locationService=A,this._router=Ne,this.store=Ce,this.cities=[],this.editMode=!1,this.formSubmitted=!1,this.invoiceId=null,this.isValid=!1,this.selectedInvoice=h.pT,this.selectedState=null,this.showAlert=!1,this.states=[],this.user$=(0,P.of)(null),this._unsubscribeAll=new l.x}ngOnInit(){var n;this.user$=this.store.select(M.dy),this.user$.pipe((0,c.R)(this._unsubscribeAll)).subscribe(o=>{this.user=o,this._changeDetectorRef.markForCheck()}),this.accounts$=this.store.select($.L3),this._locationService.states$.pipe((0,c.R)(this._unsubscribeAll)).subscribe(o=>{this.states=o,this._changeDetectorRef.markForCheck()}),this._activatedRoute.params.pipe((0,c.R)(this._unsubscribeAll)).subscribe(({invoiceId:o})=>{this.invoiceId=o,this._changeDetectorRef.markForCheck()}),this.invoiceForm=this._formBuilder.group({_id:[null],userId:[this.user._id,[a.kI.required]],createdAt:[null],invoiceNo:[{disabled:!0,value:Te()},[a.kI.required]],accountId:[null,[a.kI.required]],senderName:[null,[a.kI.required]],lastName1:[null,[a.kI.required]],lastName2:[null],senderAddress:[null,[a.kI.required]],idNumber:[null,[a.kI.required]],destiny:[null,[a.kI.required]],cardNo:[null,[a.kI.required]],amount:[0,[a.kI.required,a.kI.min(0),a.kI.max(1e4)]],fincimexTax:[{disabled:!0,value:0},[a.kI.required,a.kI.min(0)]],sendFincimex:[!0,[a.kI.required]],beneficiaryIdNumber:[null,[a.kI.required,a.kI.maxLength(11)]],beneficiaryName:[null,[a.kI.required]],beneficiaryLastName1:[null,[a.kI.required]],beneficiaryLastName2:[null],beneficiaryState:[null,[a.kI.required]],beneficiaryCity:[null,[a.kI.required]],beneficiaryTown:[null,[a.kI.required]],beneficiaryAddress:[null,[a.kI.required]],beneficiaryPhoneNumber:[null,[a.kI.required]],beneficiaryNote:[null,[a.kI.required]]}),null===(n=this.invoiceForm.get("beneficiaryState"))||void 0===n||n.valueChanges.pipe((0,c.R)(this._unsubscribeAll)).subscribe(o=>{this._getCitiesByState(o),this._changeDetectorRef.markForCheck()})}_getCitiesByState(n){n!==this.selectedState&&this._locationService.getCitiesByState(n).pipe((0,c.R)(this._unsubscribeAll)).subscribe(o=>{this.cities=o,this._changeDetectorRef.markForCheck()})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(d.gz),e.Y36(C.C),e.Y36(e.sBO),e.Y36(a.qu),e.Y36(G.a),e.Y36(d.F0),e.Y36(m.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ath-invoice-detail"]],decls:82,vars:38,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-mine-50","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"ml-1","text-primary-700","hover:underline",3,"routerLink"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[4,"ngIf"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl","text-mine-900"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["class","ml-4 rounded-sm bg-primary-700 hover:shadow-lg","mat-button","",3,"ngClass","disabled","click",4,"ngIf"],["class","ml-4 rounded-sm bg-primary-700 hover:shadow-lg","mat-button","",3,"click",4,"ngIf"],[1,"flex-auto","p-6","bg-mine-200","shadow","sm:p-10","rounded-t-2xl"],[1,"flex","flex-col","flex-auto","min-w-0"],[3,"formGroup","autocomplete"],[1,"w-full"],[3,"expanded"],[3,"collapsedHeight"],[1,"flex","items-center"],[1,"text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"grid","w-full","gap-6","p-8","mb-6","border-t-2","sm:grid-cols-4"],[1,"sm:col-span-2"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","required","",3,"type","formControlName"],[3,"formControlName"],[4,"ngFor","ngForOf"],["matInput","","required","",3,"type","formControlName","placeholder"],[1,"sm:col-span-4"],["matInput","","required","",3,"placeholder","formControlName"],[1,"ml-1","text-primary-700"],["mat-button","",1,"ml-4","rounded-sm","bg-primary-700","hover:shadow-lg",3,"ngClass","disabled","click"],[1,"text-mine-900",3,"svgIcon"],[1,"ml-2","mr-1","text-lg","text-mine-900"],["mat-button","",1,"ml-4","rounded-sm","bg-primary-700","hover:shadow-lg",3,"click"],[3,"value"],[1,"grid","w-full","gap-6","p-8","mb-6","border-t-2","sm:grid-cols-2","md:grid-cols-4"],[1,""],[1,"sm:col-span-3"],[1,"flex","flex-col"],[1,"mb-4","font-medium"],[3,"formControlName","color"],["matInput","",3,"type","formControlName"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],[3,"value",4,"ngFor","ngForOf"],["matInput","",3,"placeholder","formControlName"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"a",5),e._uU(7,"Facturas"),e.qZA(),e.qZA(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.YNc(10,V,3,0,"ng-container",7),e.YNc(11,X,3,1,"ng-container",7),e.qZA(),e.qZA(),e.TgZ(12,"div",8),e.TgZ(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"div",12),e.YNc(19,ee,2,0,"ng-container",7),e.YNc(20,te,2,1,"ng-container",7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",13),e.YNc(22,oe,4,5,"button",14),e.YNc(23,ie,4,1,"button",15),e.qZA(),e.qZA(),e.TgZ(24,"div",16),e.TgZ(25,"div",17),e.TgZ(26,"form",18),e.TgZ(27,"mat-accordion",19),e.TgZ(28,"mat-expansion-panel",20),e.TgZ(29,"mat-expansion-panel-header",21),e.TgZ(30,"mat-panel-title",22),e.TgZ(31,"div",23),e._uU(32," Informaci\xf3n General "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"div",24),e.TgZ(34,"div",25),e.TgZ(35,"mat-form-field",26),e.TgZ(36,"mat-label"),e._uU(37,"N\xfamero de Factura"),e.qZA(),e._UZ(38,"input",27),e.qZA(),e.qZA(),e.TgZ(39,"div",25),e.TgZ(40,"mat-form-field",26),e.TgZ(41,"mat-label"),e._uU(42,"Seleccione la cuenta "),e.qZA(),e.TgZ(43,"mat-select",28),e.YNc(44,re,3,2,"ng-container",29),e.ALo(45,"async"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"mat-expansion-panel"),e.TgZ(47,"mat-expansion-panel-header",21),e.TgZ(48,"mat-panel-title",22),e.TgZ(49,"div",23),e._uU(50," Informaci\xf3n del Remesante "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(51,"div",24),e.TgZ(52,"div",25),e.TgZ(53,"mat-form-field",26),e.TgZ(54,"mat-label"),e._uU(55,"N\xfamero de Identidad o Pasaporte"),e.qZA(),e._UZ(56,"input",30),e.YNc(57,ae,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(58,"div",25),e.TgZ(59,"mat-form-field",26),e.TgZ(60,"mat-label"),e._uU(61,"Nombre"),e.qZA(),e._UZ(62,"input",30),e.YNc(63,ce,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(64,"div",25),e.TgZ(65,"mat-form-field",26),e.TgZ(66,"mat-label"),e._uU(67,"Primer Apellido"),e.qZA(),e._UZ(68,"input",27),e.YNc(69,le,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(70,"div",25),e.TgZ(71,"mat-form-field",26),e.TgZ(72,"mat-label"),e._uU(73,"Segundo Apellido"),e.qZA(),e._UZ(74,"input",27),e.qZA(),e.qZA(),e.TgZ(75,"div",31),e.TgZ(76,"mat-form-field",26),e.TgZ(77,"mat-label"),e._uU(78,"Direcci\xf3n"),e.qZA(),e._UZ(79,"textarea",32),e.YNc(80,se,2,0,"mat-error",7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(81,Ae,98,44,"mat-expansion-panel",7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(6),e.Q6J("routerLink","/invoices"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(1),e.Q6J("ngIf","new"===o.invoiceId),e.xp6(1),e.Q6J("ngIf","new"!==o.invoiceId),e.xp6(2),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(5),e.Q6J("ngIf","new"===o.invoiceId),e.xp6(1),e.Q6J("ngIf","new"!==o.invoiceId),e.xp6(2),e.Q6J("ngIf","new"===o.invoiceId),e.xp6(1),e.Q6J("ngIf","new"!==o.invoiceId),e.xp6(3),e.Q6J("formGroup",o.invoiceForm)("autocomplete","off"),e.xp6(2),e.Q6J("expanded",!0),e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(9),e.Q6J("type","text")("formControlName","invoiceNo"),e.xp6(5),e.Q6J("formControlName","accountId"),e.xp6(1),e.Q6J("ngForOf",e.lcZ(45,36,o.accounts$)),e.xp6(3),e.Q6J("collapsedHeight","56px"),e.xp6(9),e.Q6J("type","text")("formControlName","idNumber")("placeholder","N\xfamero de Identidad o Pasaporte"),e.xp6(1),e.Q6J("ngIf",o.invoiceForm.get("idNumber").hasError("required")),e.xp6(5),e.Q6J("type","text")("formControlName","senderName")("placeholder","Nombre"),e.xp6(1),e.Q6J("ngIf",o.invoiceForm.get("senderName").hasError("required")),e.xp6(5),e.Q6J("type","text")("formControlName","lastName1"),e.xp6(1),e.Q6J("ngIf",o.invoiceForm.get("lastName1").hasError("required")),e.xp6(5),e.Q6J("type","text")("formControlName","lastName2"),e.xp6(5),e.Q6J("placeholder","Direcci\xf3n del remesante")("formControlName","senderAddress"),e.xp6(1),e.Q6J("ngIf",o.invoiceForm.get("senderAddress").hasError("required")),e.xp6(1),e.Q6J("ngIf",!o.editMode))},directives:[U.PQ,d.yS,F.Hw,x.O5,Q.lW,x.mk,a._Y,a.JL,a.sg,b.pp,b.ib,b.yz,b.yK,y.KE,y.hX,H.Nt,a.Fj,a.Q7,a.JJ,a.u,z.gD,x.sg,K.ey,y.TO,W.Rr,y.qo],pipes:[x.Ov],encapsulation:2,data:{animation:q.p},changeDetection:0}),t})();var J=i(345);let k=(()=>{class t{constructor(n){this.store=n}resolve(n,o){return this.store.dispatch((0,J.sL)())}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(m.yh))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ie=(()=>{class t{constructor(n){this.store=n}resolve(n,o){const u=n.params.invoiceId;if("new"!==u)return this.store.dispatch((0,J.XD)({invoiceId:u}))}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(m.yh))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var w=i(5497),qe=i(7681);const be=[{path:"",component:B,resolve:{invoices:k,users:w.o}},{path:":invoiceId",component:he,resolve:{accounts:qe.$c,invoice:Ie,invoices:k,users:w.o}}];let ye=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[d.Bz.forChild(be),g.m]]}),t})()},9652:(I,v,i)=>{i.d(v,{kP:()=>a});let d=p=>crypto.getRandomValues(new Uint8Array(p)),a=(p,l=21)=>((p,l,c)=>{let m=(2<<Math.log(p.length-1)/Math.LN2)-1,s=-~(1.6*m*l/p.length);return(T=l)=>{let Z="";for(;;){let q=c(s),h=s;for(;h--;)if(Z+=p[q[h]&m]||"",Z.length===T)return Z}}})(p,l,d)}}]);