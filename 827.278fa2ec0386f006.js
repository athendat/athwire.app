"use strict";(self.webpackChunkath=self.webpackChunkath||[]).push([[827],{9827:(J,p,r)=>{r.r(p),r.d(p,{ReportsModule:()=>P});var h=r(5357),v=r(5303),S=r(2455),l=r(3075),O=r(9646),E=r(7579),y=r(2722),C=r(5700),M=r(5439),b=r(508),e=r(5e3),f=r(1135),I=r(4004),R=r(2340),A=r(520);const Y=R.N.API_URL;let u=(()=>{class n{constructor(t){this._httpClient=t,this._monthOperations=new f.X(null),this._pagination=new f.X(null)}get monthOperations$(){return this._monthOperations.asObservable()}get pagination$(){return this._pagination.asObservable()}getMonthOperations(t){return this._httpClient.get(`${Y}/invoices/month-operations/${t}`).pipe((0,I.U)(o=>{const i=class F{constructor(a){Object.assign(this,a)}static fill(a){const t=[];for(let o=1;o<13;o++)t.push({_id:o,month:o});for(const o of a){const i=t.findIndex(s=>s.month===o.month);t[i]=o}return t}}.fill(o.monthOperations);return this._monthOperations.next(i),o.monthOperations}))}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(A.eN))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var D=r(1927),j=r(5245),x=r(7322),T=r(7531),m=r(6856),c=r(9808),V=r(7423),d=r(2181),g=r(4847);function k(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",36),e.\u0275\u0275elementStart(2,"div",37),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",32),e.\u0275\u0275text(5),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(6,"div",38),e.\u0275\u0275text(7),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",38),e.\u0275\u0275text(9),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()),2&n){const t=a.$implicit,o=e.\u0275\u0275nextContext(3);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate1(" ",o.monthByIndex(t.month)," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.totalInvoices," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.totalCanceled," "),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",t.totalAmount," ")}}function w(n,a){if(1&n&&(e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275template(1,k,10,4,"ng-container",35),e.\u0275\u0275elementContainerEnd()),2&n){const t=a.ngIf,o=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("ngForOf",t)("ngForTrackBy",o.trackByFn)}}function B(n,a){if(1&n){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"div",21),e.\u0275\u0275elementStart(2,"div",22),e.\u0275\u0275text(3,"Reporte de Operaciones del Mes"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"div",23),e.\u0275\u0275elementStart(5,"button",24),e.\u0275\u0275element(6,"mat-icon",25),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(7,"mat-menu",null,26),e.\u0275\u0275elementStart(9,"button",27),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().exportAsExcelFile()}),e.\u0275\u0275text(10,"Exportar a excel"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(11,"button",27),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().exportAsCsvFile()}),e.\u0275\u0275text(12,"Exportar a csv"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",28),e.\u0275\u0275elementStart(14,"div",29),e.\u0275\u0275elementStart(15,"div"),e.\u0275\u0275text(16," Mes "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(17,"div",30),e.\u0275\u0275elementStart(18,"div",31),e.\u0275\u0275text(19," Remesas "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(20,"div",32),e.\u0275\u0275text(21," Canceladas "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",33),e.\u0275\u0275text(23," Dinero Depositado "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(24,w,2,2,"ng-container",34),e.\u0275\u0275pipe(25,"async"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&n){const t=e.\u0275\u0275reference(8),o=e.\u0275\u0275nextContext();e.\u0275\u0275advance(5),e.\u0275\u0275property("matMenuTriggerFor",t),e.\u0275\u0275advance(1),e.\u0275\u0275property("svgIcon","heroicons_solid:dots-vertical"),e.\u0275\u0275advance(12),e.\u0275\u0275property("mat-sort-header","no"),e.\u0275\u0275advance(6),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(25,4,o.monthOperations$))}}function $(n,a){1&n&&(e.\u0275\u0275elementStart(0,"div",39),e.\u0275\u0275text(1,"A\xfan no se ha generado ning\xfan estado cuenta!"),e.\u0275\u0275elementEnd())}const L={parse:{dateInput:"YYYY"},display:{dateInput:"YYYY",monthYearLabel:"YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"YYYY"}},N=[{path:"",component:(()=>{class n{constructor(t,o,i){this._reportService=t,this._changeDetectorRef=o,this._fileSaverService=i,this.monthOperations=[],this.monthOperations$=(0,O.of)([]),this.date=new l.FormControl(M()),this._unsubscribeAll=new E.x}ngOnInit(){this.monthOperations$=this._reportService.monthOperations$}ngAfterViewInit(){}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}setMonthAndYear(t,o){const i=this.date.value;this._reportService.getMonthOperations(t.year()).pipe((0,y.R)(this._unsubscribeAll)).subscribe(),i.year(t.year()),this.date.setValue(i),o.close()}exportAsExcelFile(){this._fileSaverService.exportAsExcelFile(this.monthOperations,"statements")}exportAsCsvFile(){this._fileSaverService.exportAsCsvFile(this.monthOperations,"statements")}trackByFn(t,o){return o.id||t}monthByIndex(t){return["Enero","febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"][t-1]}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275directiveInject(u),e.\u0275\u0275directiveInject(e.ChangeDetectorRef),e.\u0275\u0275directiveInject(D.m))},n.\u0275cmp=e.\u0275\u0275defineComponent({type:n,selectors:[["ath-month-operations"]],features:[e.\u0275\u0275ProvidersFeature([{provide:b.sG,useValue:L}])],decls:28,vars:9,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pb-22","sm:pt-12","sm:pb-28","sm:px-10","bg-mine-50","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"whitespace-nowrap","text-primary-700"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["appearance","fill"],["matInput","",3,"matDatepicker","formControl"],["matSuffix","",3,"for"],["startView","multi-year","panelClass","example-month-picker",3,"yearSelected"],["dp",""],[1,"flex-auto","p-6","-mt-16","bg-mine-200","shadow","sm:p-10","rounded-t-2xl"],[1,"w-full","p-8","md:p-16","shadow","rounded-2xl","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[4,"ngIf","ngIfElse"],["noMonthOperations",""],[1,"flex","items-center","justify-between","mb-5"],[1,"text-2xl","font-semibold","leading-tight"],[1,"-mr-3"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["listMonthOperationsMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","month-operations-grid","md:px-8","text-md","text-secondary","bg-mine-50","dark:bg-black","dark:bg-opacity-5"],[1,"justify-center","text-center","hidden","truncate","sm:flex"],[1,"text-center","truncate",3,"mat-sort-header"],[1,"text-center","hidden","sm:block"],[1,"text-center"],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","month-operations-grid","md:px-8"],[1,"truncate"],[1,"hidden","text-center","sm:block"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","sm:p-16"]],template:function(t,o){if(1&t){const i=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"div",0),e.\u0275\u0275elementStart(1,"div",1),e.\u0275\u0275elementStart(2,"div",2),e.\u0275\u0275elementStart(3,"div"),e.\u0275\u0275elementStart(4,"div",3),e.\u0275\u0275elementStart(5,"div"),e.\u0275\u0275elementStart(6,"a",4),e.\u0275\u0275text(7,"Operaciones del Mes"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"div",5),e.\u0275\u0275elementStart(9,"a",6),e.\u0275\u0275element(10,"mat-icon",7),e.\u0275\u0275elementStart(11,"span",8),e.\u0275\u0275text(12,"Regresar"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(13,"div",9),e.\u0275\u0275elementStart(14,"h2",10),e.\u0275\u0275text(15," Reporte de Operaciones del Mes "),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(16,"div",11),e.\u0275\u0275elementStart(17,"mat-form-field",12),e.\u0275\u0275element(18,"input",13),e.\u0275\u0275element(19,"mat-datepicker-toggle",14),e.\u0275\u0275elementStart(20,"mat-datepicker",15,16),e.\u0275\u0275listener("yearSelected",function(U){e.\u0275\u0275restoreView(i);const z=e.\u0275\u0275reference(21);return o.setMonthAndYear(U,z)}),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(22,"div",17),e.\u0275\u0275elementStart(23,"div",18),e.\u0275\u0275template(24,B,26,6,"ng-container",19),e.\u0275\u0275pipe(25,"async"),e.\u0275\u0275template(26,$,2,0,"ng-template",null,20,e.\u0275\u0275templateRefExtractor),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementEnd()}if(2&t){const i=e.\u0275\u0275reference(21),s=e.\u0275\u0275reference(27);e.\u0275\u0275advance(9),e.\u0275\u0275property("routerLink","./.."),e.\u0275\u0275advance(1),e.\u0275\u0275property("svgIcon","heroicons_solid:chevron-left"),e.\u0275\u0275advance(8),e.\u0275\u0275property("matDatepicker",i)("formControl",o.date),e.\u0275\u0275advance(1),e.\u0275\u0275property("for",i),e.\u0275\u0275advance(5),e.\u0275\u0275property("ngIf",e.\u0275\u0275pipeBind1(25,7,o.monthOperations$).length>0)("ngIfElse",s)}},directives:[v.PQ,h.yS,j.Hw,x.KE,T.Nt,m.hl,l.DefaultValueAccessor,l.NgControlStatus,l.FormControlDirective,m.nW,x.R9,m.Mq,c.O5,V.lW,d.p6,d.VK,d.OP,g.YE,g.nU,c.sg],pipes:[c.Ov],encapsulation:2,data:{animation:C.p},changeDetection:0}),n})(),resolve:{monthOperations:(()=>{class n{constructor(t){this._monthOperationsService=t}resolve(t,o){return this._monthOperationsService.getMonthOperations(new Date(Date.now()).getFullYear())}}return n.\u0275fac=function(t){return new(t||n)(e.\u0275\u0275inject(u))},n.\u0275prov=e.\u0275\u0275defineInjectable({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()}}];let P=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=e.\u0275\u0275defineInjector({imports:[[h.Bz.forChild(N),v.ZD,S.m]]}),n})()}}]);