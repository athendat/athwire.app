"use strict";(self.webpackChunkath=self.webpackChunkath||[]).push([[333],{5333:(Co,$,a)=>{a.r($),a.d($,{RoleModule:()=>bo});var T=a(9808),H=a(5357),Te=a(508),F=a(7423),Re=a(6856),b=a(7322),P=a(5245),E=a(7531),be=a(3170),Ce=a(4107),ye=a(3214),Ie=a(5439),Me=a.n(Ie),N=a(3680),we=a(2455),p=a(3075),De=a(6087),Q=a(4847),G=a(7579),W=a(9646),Se=a(5700),C=a(8966),y=a(2722),Oe=a(7585),Fe=a(139),J=a(7845);var X=a(8706);const K=function Ne(n,o){return function(t,i){if(null==t)return t;if(!(0,X.Z)(t))return n(t,i);for(var r=t.length,s=o?r:-1,l=Object(t);(o?s--:++s<r)&&!1!==i(l[s],s,l););return t}}(function Pe(n,o){return n&&(0,Fe.Z)(n,o,J.Z)});var z=a(9940);var R=a(4177);const I=function Le(n,o){return((0,R.Z)(n)?Oe.Z:K)(n,function Je(n){return"function"==typeof n?n:z.Z}(o))};var M=a(5343),Ye=a(3639);function w(n){var o=-1,t=null==n?0:n.length;for(this.__data__=new Ye.Z;++o<t;)this.add(n[o])}w.prototype.add=w.prototype.push=function Be(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},w.prototype.has=function He(n){return this.__data__.has(n)};const We=w,k=function Xe(n,o){for(var t=-1,i=null==n?0:n.length;++t<i;)if(o(n[t],t,n))return!0;return!1},ze=function Ke(n,o){return n.has(o)},j=function Ve(n,o,t,i,r,s){var l=1&t,d=n.length,c=o.length;if(d!=c&&!(l&&c>d))return!1;var g=s.get(n),f=s.get(o);if(g&&f)return g==o&&f==n;var u=-1,m=!0,_=2&t?new We:void 0;for(s.set(n,o),s.set(o,n);++u<d;){var h=n[u],x=o[u];if(i)var v=l?i(x,h,u,o,n,s):i(h,x,u,n,o,s);if(void 0!==v){if(v)continue;m=!1;break}if(_){if(!k(o,function(Z,A){if(!ze(_,A)&&(h===Z||r(h,Z,t,i,s)))return _.push(A)})){m=!1;break}}else if(h!==x&&!r(h,x,t,i,s)){m=!1;break}}return s.delete(n),s.delete(o),m};var V=a(8492),ee=a(1630),en=a(3093);const tn=function nn(n){var o=-1,t=Array(n.size);return n.forEach(function(i,r){t[++o]=[r,i]}),t},rn=function on(n){var o=-1,t=Array(n.size);return n.forEach(function(i){t[++o]=i}),t};var ne=V.Z?V.Z.prototype:void 0,U=ne?ne.valueOf:void 0;var te=a(8501),Rn=Object.prototype.hasOwnProperty;var oe=a(4116),ie=a(5202),yn=a(7583),re="[object Arguments]",se="[object Array]",D="[object Object]",ae=Object.prototype.hasOwnProperty;const Dn=function wn(n,o,t,i,r,s){var l=(0,R.Z)(n),d=(0,R.Z)(o),c=l?se:(0,oe.Z)(n),g=d?se:(0,oe.Z)(o),f=(c=c==re?D:c)==D,u=(g=g==re?D:g)==D,m=c==g;if(m&&(0,ie.Z)(n)){if(!(0,ie.Z)(o))return!1;l=!0,f=!1}if(m&&!f)return s||(s=new M.Z),l||(0,yn.Z)(n)?j(n,o,t,i,r,s):function vn(n,o,t,i,r,s,l){switch(t){case"[object DataView]":if(n.byteLength!=o.byteLength||n.byteOffset!=o.byteOffset)return!1;n=n.buffer,o=o.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=o.byteLength||!s(new ee.Z(n),new ee.Z(o)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,en.Z)(+n,+o);case"[object Error]":return n.name==o.name&&n.message==o.message;case"[object RegExp]":case"[object String]":return n==o+"";case"[object Map]":var d=tn;case"[object Set]":if(d||(d=rn),n.size!=o.size&&!(1&i))return!1;var g=l.get(n);if(g)return g==o;i|=2,l.set(n,o);var f=j(d(n),d(o),i,r,s,l);return l.delete(n),f;case"[object Symbol]":if(U)return U.call(n)==U.call(o)}return!1}(n,o,c,t,i,r,s);if(!(1&t)){var _=f&&ae.call(n,"__wrapped__"),h=u&&ae.call(o,"__wrapped__");if(_||h){var x=_?n.value():n,v=h?o.value():o;return s||(s=new M.Z),r(x,v,t,i,s)}}return!!m&&(s||(s=new M.Z),function bn(n,o,t,i,r,s){var l=1&t,d=(0,te.Z)(n),c=d.length;if(c!=(0,te.Z)(o).length&&!l)return!1;for(var u=c;u--;){var m=d[u];if(!(l?m in o:Rn.call(o,m)))return!1}var _=s.get(n),h=s.get(o);if(_&&h)return _==o&&h==n;var x=!0;s.set(n,o),s.set(o,n);for(var v=l;++u<c;){var Z=n[m=d[u]],A=o[m];if(i)var Ae=l?i(A,Z,m,o,n,s):i(Z,A,m,n,o,s);if(!(void 0===Ae?Z===A||r(Z,A,t,i,s):Ae)){x=!1;break}v||(v="constructor"==m)}if(x&&!v){var S=n.constructor,O=o.constructor;S!=O&&"constructor"in n&&"constructor"in o&&!("function"==typeof S&&S instanceof S&&"function"==typeof O&&O instanceof O)&&(x=!1)}return s.delete(n),s.delete(o),x}(n,o,t,i,r,s))};var le=a(214);const de=function ce(n,o,t,i,r){return n===o||(null==n||null==o||!(0,le.Z)(n)&&!(0,le.Z)(o)?n!=n&&o!=o:Dn(n,o,t,i,ce,r))};var L=a(1999);const fe=function En(n){return n==n&&!(0,L.Z)(n)},me=function Jn(n,o){return function(t){return null!=t&&t[n]===o&&(void 0!==o||n in Object(t))}},Ln=function Un(n){var o=function Nn(n){for(var o=(0,J.Z)(n),t=o.length;t--;){var i=o[t],r=n[i];o[t]=[i,r,fe(r)]}return o}(n);return 1==o.length&&o[0][2]?me(o[0][0],o[0][1]):function(t){return t===n||function Fn(n,o,t,i){var r=t.length,s=r,l=!i;if(null==n)return!s;for(n=Object(n);r--;){var d=t[r];if(l&&d[2]?d[1]!==n[d[0]]:!(d[0]in n))return!1}for(;++r<s;){var c=(d=t[r])[0],g=n[c],f=d[1];if(l&&d[2]){if(void 0===g&&!(c in n))return!1}else{var u=new M.Z;if(i)var m=i(g,f,c,n,o,u);if(!(void 0===m?de(f,g,3,i,u):m))return!1}}return!0}(t,n,o)}};var ge=a(7298);const $n=function Bn(n,o){return null!=n&&o in Object(n)};var Hn=a(7370),Gn=a(4825),Wn=a(6667),Xn=a(8696),Y=a(2168);const jn=function kn(n,o){return null!=n&&function Kn(n,o,t){for(var i=-1,r=(o=(0,Hn.Z)(o,n)).length,s=!1;++i<r;){var l=(0,Y.Z)(o[i]);if(!(s=null!=n&&t(n,l)))break;n=n[l]}return s||++i!=r?s:!!(r=null==n?0:n.length)&&(0,Xn.Z)(r)&&(0,Wn.Z)(l,r)&&((0,R.Z)(n)||(0,Gn.Z)(n))}(n,o,$n)};var ue=a(3660);const tt=function nt(n,o){return(0,ue.Z)(n)&&fe(o)?me((0,Y.Z)(n),o):function(t){var i=function Yn(n,o,t){var i=null==n?void 0:(0,ge.Z)(n,o);return void 0===i?t:i}(t,n);return void 0===i&&i===o?jn(t,n):de(o,i,3)}},lt=function at(n){return(0,ue.Z)(n)?function ot(n){return function(o){return null==o?void 0:o[n]}}((0,Y.Z)(n)):function rt(n){return function(o){return(0,ge.Z)(o,n)}}(n)},q=function ct(n){return"function"==typeof n?n:null==n?z.Z:"object"==typeof n?(0,R.Z)(n)?tt(n[0],n[1]):Ln(n):lt(n)};var ut=/\s/;var xt=/^\s+/;const vt=function _t(n){return n&&n.slice(0,function pt(n){for(var o=n.length;o--&&ut.test(n.charAt(o)););return o}(n)+1).replace(xt,"")};var Zt=a(6460),At=/^[-+]0x[0-9a-f]+$/i,Tt=/^0b[01]+$/i,Rt=/^0o[0-7]+$/i,bt=parseInt;const wt=function Mt(n){return n?1/0===(n=function Ct(n){if("number"==typeof n)return n;if((0,Zt.Z)(n))return NaN;if((0,L.Z)(n)){var o="function"==typeof n.valueOf?n.valueOf():n;n=(0,L.Z)(o)?o+"":o}if("string"!=typeof n)return 0===n?n:+n;n=vt(n);var t=Tt.test(n);return t||Rt.test(n)?bt(n.slice(2),t?2:8):At.test(n)?NaN:+n}(n))||-1/0===n?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0};var Ot=Math.max;const xe=function dt(n){return function(o,t,i){var r=Object(o);if(!(0,X.Z)(o)){var s=q(t);o=(0,J.Z)(o),t=function(d){return s(r[d],d,r)}}var l=n(o,t,i);return l>-1?r[s?o[l]:l]:void 0}}(function Ft(n,o,t){var i=null==n?0:n.length;if(!i)return-1;var r=null==t?0:function Dt(n){var o=wt(n),t=o%1;return o==o?t?o-t:o:0}(t);return r<0&&(r=Ot(i+r,0)),function mt(n,o,t,i){for(var r=n.length,s=t+(i?1:-1);i?s--:++s<r;)if(o(n[s],s,n))return s;return-1}(n,q(o),r)}),Nt=function Et(n,o){var t;return K(n,function(i,r,s){return!(t=o(i,r,s))}),!!t};var Qt=a(4810);var Lt=a(5119);class B{clear(){this._id=null,this.name="",this.permissions=[],this.isCoreRole=!1,this.checked=!1}}class _e{clear(){this._id=void 0,this.title="",this.level=1,this.parentId=void 0,this.isSelected=!1,this.name="",this._children=[]}}var e=a(5e3),ve=a(7967),Ze=a(1349),Yt=a(7065),qt=a(7446);function Bt(n,o){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Agregar rol "),e.qZA())}function $t(n,o){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Editar rol "),e.qZA())}function Ht(n,o){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Detalles del rol "),e.qZA())}function Gt(n,o){if(1&n&&(e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"div",10),e.TgZ(3,"div",11),e.TgZ(4,"div",12),e.TgZ(5,"h6",13),e._uU(6,"Title"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA(),e.qZA(),e.TgZ(9,"div",15),e.TgZ(10,"h6",13),e._uU(11,"Descripci\xf3n"),e.qZA(),e.TgZ(12,"span",14),e._uU(13),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(8),e.Oqu(t.data.role.name||"Sin nombre"),e.xp6(5),e.Oqu(t.data.role.description||"Sin descripci\xf3n")}}function Wt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",35),e.TgZ(1,"span"),e.TgZ(2,"mat-checkbox",36),e.NdJ("ngModelChange",function(r){return e.CHM(t).$implicit.isSelected=r})("change",function(r){const l=e.CHM(t).$implicit;return e.oxw(3).isSelectedChanged(r,l)}),e._uU(3),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw(3);e.xp6(2),e.Q6J("color","primary")("ngModel",t.isSelected)("disabled",i.singleRole.isCoreRole),e.xp6(1),e.hij(" ",t.title," ")}}function Xt(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",31),e.TgZ(1,"div",32),e.TgZ(2,"span"),e._uU(3),e.qZA(),e.TgZ(4,"mat-checkbox",33),e.NdJ("ngModelChange",function(r){return e.CHM(t).$implicit.isSelected=r})("change",function(r){const l=e.CHM(t).$implicit;return e.oxw(2).isSelectedChanged(r,l)}),e.qZA(),e.qZA(),e.YNc(5,Wt,4,4,"div",34),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw(2);e.xp6(3),e.hij(" ",t.title," "),e.xp6(1),e.Q6J("ngModel",t.isSelected)("disabled",i.singleRole.isCoreRole),e.xp6(1),e.Q6J("ngForOf",t._children)}}function Kt(n,o){if(1&n&&(e.TgZ(0,"div",16),e.TgZ(1,"div",17),e.TgZ(2,"form",18),e.TgZ(3,"div",19),e.TgZ(4,"mat-form-field",20),e.TgZ(5,"mat-label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"mat-icon",21),e._UZ(8,"input",22),e.qZA(),e.qZA(),e.TgZ(9,"div",23),e.TgZ(10,"mat-form-field",20),e.TgZ(11,"mat-label"),e._uU(12,"Descripc\xf3n"),e.qZA(),e._UZ(13,"mat-icon",24),e._UZ(14,"textarea",25),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",26),e.TgZ(16,"div",27),e.TgZ(17,"mat-label",28),e._uU(18,"Permisos"),e.qZA(),e.qZA(),e.TgZ(19,"div",29),e.YNc(20,Xt,6,4,"div",30),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.roleForm)("autocomplete","off"),e.xp6(5),e.Q6J("svgIcon","heroicons_outline:pencil-alt"),e.xp6(1),e.Q6J("type","text")("formControlName","name")("placeholder","Nombre del rol"),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:menu-alt-2"),e.xp6(1),e.Q6J("formControlName","description")("rows",3)("spellcheck",!1),e.xp6(6),e.Q6J("ngForOf",t.rolePermissions)}}function zt(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).updateRole()}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.roleForm.disabled||t.roleForm.invalid)("color","primary")("matDialogClose","confirmed")}}function kt(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).createRole()}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.roleForm.disabled||t.roleForm.invalid)("color","primary")("matDialogClose","confirmed")}}function jt(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",37),e.ynx(2),e.TgZ(3,"button",38),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,zt,3,3,"ng-container",6),e.YNc(6,kt,3,3,"ng-container",6),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let Vt=(()=>{class n{constructor(t,i,r,s,l){this.data=t,this._changeDetectorRef=i,this._formBuilder=r,this._athConfirmationService=s,this._roleService=l,this.singleRole=new B,this.dialogMode="view",this.rolePermissions=[],this._unsubscribeAll=new G.x}ngOnInit(){this.singleRole.clear(),this.roleForm=this._formBuilder.group({_id:[""],isCoreRole:[!1],name:["",[p.kI.required]],description:["",[p.kI.required,p.kI.minLength(8)]]}),"edit"===this.data.dialogMode&&(this.singleRole=this.data.singleRole,this.roleForm.patchValue(this.data.singleRole)),this.allPermissions$=this._roleService.permissions$,this.loadPermissions()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}loadPermissions(){this.allPermissions$.subscribe(t=>{t&&t.filter(r=>r.parentId===r._id).forEach(r=>{const s=this.singleRole.permissions.some(c=>c===r._id),l=new _e;l.clear(),l.isSelected=s,l._children=[],l._id=r._id,l.level=r.level,l.parentId=r.parentId,l.title=r.title,t.filter(c=>c.parentId&&c.parentId===r._id).forEach(c=>{if(c._id!==c.parentId){const g=this.singleRole.permissions.some(u=>u===c._id),f=new _e;f.clear(),f.isSelected=g,f._children=[],f._id=c._id,f.level=c.level,f.parentId=c.parentId,f.title=c.title,l._children.push(f)}}),this.rolePermissions.push(l)})}),console.table(this.rolePermissions)}preparePermissionIds(){const t=[];return I(this.rolePermissions,i=>{i.isSelected&&(t.push(i._id),I(i._children,r=>{r.isSelected&&t.push(r._id)}))}),t}prepareRole(){const t=new B;return t._id=this.singleRole._id,t.permissions=this.preparePermissionIds(),t.name=this.singleRole.name,t.isCoreRole=this.singleRole.isCoreRole,t}isSelectedChanged(t,i){if(0===i._children.length&&i.isSelected){const r=xe(this.rolePermissions,s=>s._id===i.parentId);r&&!r.isSelected&&(r.isSelected=!0)}else if(0!==i._children.length||i.isSelected)i._children.length>0&&i.isSelected?I(i._children,r=>r.isSelected=!0):i._children.length>0&&!i.isSelected&&I(i._children,r=>{r.isSelected=!1});else{const r=xe(this.rolePermissions,s=>s._id===i.parentId);r&&r.isSelected&&(function Jt(n,o,t){var i=(0,R.Z)(n)?k:Nt;return t&&(0,Qt.Z)(n,o,t)&&(o=void 0),i(n,q(o))}(r._children,s=>!0===s.isSelected)||(r.isSelected=!1))}}createRole(){let t=this.roleForm.getRawValue();t=(0,Lt.Z)(t,"id"),t.permissions=this.prepareRole().permissions,this._athConfirmationService.open({title:"Crear Rol",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._roleService.createRole(t).pipe((0,y.R)(this._unsubscribeAll)).subscribe(s=>{this._athConfirmationService.open({title:"Rol creado correctamente",message:s.name,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},s=>{this._athConfirmationService.open({title:`${s.statusText}: ${s.status}`,message:s.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateRole(){const t=this.roleForm.getRawValue();t.permissions=this.prepareRole().permissions,this._athConfirmationService.open({title:"Actualizar Rol",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._roleService.updateRole(t).pipe((0,y.R)(this._unsubscribeAll)).subscribe(s=>{this._athConfirmationService.open({title:"Rol actualizado correctamente",message:s.name,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},s=>{this._athConfirmationService.open({title:`${s.statusText}: ${s.status}`,message:s.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(C.WI),e.Y36(e.sBO),e.Y36(p.qu),e.Y36(ve.C),e.Y36(Ze.N))},n.\u0275cmp=e.Xpm({type:n,selectors:[["role-dialog"]],decls:12,vars:6,consts:[["athScrollbar","",1,"relative","flex","flex-col","w-full","h-full","max-h-screen"],[1,"flex","flex-col","items-center","px-8","pt-4","pb-6","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:pb-6","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","sm:flex-row","sm:items-start"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","pb-4","my-10"],[1,"w-full","overflow-hidden"],[1,"flex",2,"flex-direction","column"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"sm:col-span-3"],[1,"w-full","fuse-mat-no-subscript"],[1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","required","",2,"margin-left","6px",3,"type","formControlName","placeholder"],[1,"py-5","sm:col-span-2"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","","required","",3,"formControlName","rows","spellcheck"],[2,"margin-top","10px","margin-bottom","20px"],[2,"margin-bottom","12px"],[1,"font-medium"],[2,"border-width","1.5px","border-radius","6px","--tw-border-opacity","1 !important","border-color","#3bbf44","padding","20px 25px 0 20px","--tw-shadow","0 0 #f000","box-shadow","0 4px 8px 0 rgba(0, 0, 0, 0.02)"],["style","display: grid; margin-bottom: 25px;\n                            grid-template-columns: 150px auto auto auto auto;",4,"ngFor","ngForOf"],[2,"display","grid","margin-bottom","25px","grid-template-columns","150px auto auto auto auto"],[2,"display","flex","justify-content","space-between"],[3,"ngModel","disabled","ngModelChange","change"],["style","display: flex; justify-content: space-around;",4,"ngFor","ngForOf"],[2,"display","flex","justify-content","space-around"],[2,"opacity","0.8",3,"color","ngModel","disabled","ngModelChange","change"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",1,"rounded-sm","text-mine-900","bg-primary-700",3,"matDialogClose"],["mat-flat-button","",1,"rounded-sm","text-mine-900","bg-primary-700",3,"disabled","color","matDialogClose","click"]],template:function(t,i){1&t&&(e.TgZ(0,"perfect-scrollbar",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,Bt,2,0,"h2",2),e.YNc(4,$t,2,0,"h2",2),e.YNc(5,Ht,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(6,"div",3),e.ynx(7),e.YNc(8,Gt,14,2,"div",4),e.BQk(),e.ynx(9),e.YNc(10,Kt,21,11,"div",5),e.BQk(),e.qZA(),e.YNc(11,jt,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",null===i.data.singleRole._id&&"add"===i.data.dialogMode),e.xp6(1),e.Q6J("ngIf",i.data.singleRole._id&&"edit"===i.data.dialogMode),e.xp6(1),e.Q6J("ngIf",i.data.singleRole._id&&"view"===i.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===i.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===i.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==i.data.dialogMode))},directives:[N.Vv,Yt.t,T.O5,p._Y,p.JL,p.sg,b.KE,b.hX,P.Hw,E.Nt,p.Fj,p.Q7,p.JJ,p.u,b.qo,T.sg,qt.oG,p.On,F.lW,C.ZT],encapsulation:2,changeDetection:0}),n})();var eo=a(8372),no=a(3900),to=a(5303),oo=a(1235),io=a(4157),ro=a(5899),so=a(7238);function ao(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw().createRole()}),e._UZ(1,"mat-icon",27),e.TgZ(2,"span",28),e._uU(3,"Nuevo Rol"),e.qZA(),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"))}function lo(n,o){1&n&&(e.TgZ(0,"div",29),e._UZ(1,"mat-progress-bar",30),e.qZA()),2&n&&(e.xp6(1),e.Q6J("mode","indeterminate"))}function co(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit;return e.oxw(3).updateRole(r)}),e._UZ(1,"mat-icon",45),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:pencil"))}function fo(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit;return e.oxw(3).deleteRole(r)}),e._UZ(1,"mat-icon",45),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:trash"))}function mo(n,o){1&n&&(e.TgZ(0,"button",46),e._UZ(1,"mat-icon",45),e.qZA()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:eye"))}const go=function(){return["ManagementUpdate","ManagementDelete"]};function uo(n,o){1&n&&(e.TgZ(0,"div",41),e.YNc(1,co,2,1,"button",42),e.YNc(2,fo,2,1,"button",42),e.YNc(3,mo,2,1,"button",43),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngxPermissionsOnly","ManagementUpdate"),e.xp6(1),e.Q6J("ngxPermissionsOnly","ManagementDelete"),e.xp6(1),e.Q6J("ngxPermissionsExcept",e.DdM(3,go)))}function po(n,o){1&n&&(e.TgZ(0,"div",41),e.TgZ(1,"button",46),e._UZ(2,"mat-icon",45),e.qZA(),e.qZA()),2&n&&(e.xp6(2),e.Q6J("svgIcon","heroicons_solid:eye"))}function ho(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",37),e.TgZ(2,"div",38),e._uU(3),e.qZA(),e.TgZ(4,"div",39),e._uU(5),e.qZA(),e.YNc(6,uo,4,4,"div",40),e.YNc(7,po,3,1,"div",40),e.qZA(),e.BQk()),2&n){const t=o.$implicit;e.xp6(3),e.hij(" ",t.isCoreRole?"\u{1f525} "+t.name:t.name," "),e.xp6(2),e.hij(" ",t.description," "),e.xp6(1),e.Q6J("ngIf",!t.isCoreRole),e.xp6(1),e.Q6J("ngIf",t.isCoreRole)}}function xo(n,o){if(1&n&&(e.ynx(0),e.YNc(1,ho,8,4,"ng-container",36),e.BQk()),2&n){const t=o.ngIf,i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}function _o(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",31),e.TgZ(2,"div",32),e.TgZ(3,"div",33),e._uU(4," Nombre "),e.qZA(),e.TgZ(5,"div"),e._uU(6,"Descripci\xf3n"),e.qZA(),e.TgZ(7,"div",34),e._uU(8,"Acci\xf3n"),e.qZA(),e.qZA(),e.YNc(9,xo,2,2,"ng-container",35),e.ALo(10,"async"),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("mat-sort-header","date"),e.xp6(6),e.Q6J("ngIf",e.lcZ(10,2,t.role$))}}function vo(n,o){1&n&&(e.TgZ(0,"div",47),e._uU(1," No ha creado ning\xfan rol a\xfan! "),e.qZA())}const To=[{path:"",component:(()=>{class n{constructor(t,i,r,s){this._changeDetectorRef=t,this._athConfirmationService=i,this._roleService=r,this.dialog=s,this.emptyRole=new B,this.flashMessage=null,this.isLoading=!1,this.searchInputControl=new p.NI,this.selectedRole=null,this._unsubscribeAll=new G.x}ngOnInit(){this.emptyRole.clear(),this.role$=this._roleService.roles$,this.searchInputControl.valueChanges.pipe((0,y.R)(this._unsubscribeAll),(0,eo.b)(200),(0,no.w)(t=>(this.closeDetails(),this.isLoading=!0,this._roleService.roles$.pipe((0,y.R)(this._unsubscribeAll)).subscribe(i=>{this.role$=(0,W.of)(i.filter(r=>r.name.toLowerCase().includes(t.toLowerCase()))),this.isLoading=!1}),(0,W.of)(t)))).subscribe()}ngAfterViewInit(){}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDetails(){this.selectedRole=null}createRole(){this.openDialog(this.emptyRole,"add")}updateRole(t){this.openDialog(t,"edit")}deleteRole(t){this._athConfirmationService.open({title:"Eliminar Rol",message:"\xbfEsta seguro que desea eliminar este rol?",icon:{show:!0,name:"heroicons_outline:exclamation",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._roleService.deleteRole(t._id).subscribe(()=>{this._athConfirmationService.open({title:"Rol eliminada correctamente",message:"",icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()},s=>{this._athConfirmationService.open({title:`${s.statusText}: ${s.status}`,message:s.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}showFlashMessage(t){this.flashMessage=t,this._changeDetectorRef.markForCheck(),setTimeout(()=>{this.flashMessage=null,this._changeDetectorRef.markForCheck()},3e3)}trackByFn(t,i){return t||i.id}openDialog(t,i){this.dialog.open(Vt,{maxWidth:"750px",minWidth:"600px",height:"auto",maxHeight:"90%",data:{singleRole:t,dialogMode:i},panelClass:"ath-dialog-panel"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(ve.C),e.Y36(Ze.N),e.Y36(C.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["pige-role"]],viewQuery:function(t,i){if(1&t&&(e.Gf(De.NW,5),e.Gf(Q.YE,5)),2&t){let r;e.iGM(r=e.CRH())&&(i._paginator=r.first),e.iGM(r=e.CRH())&&(i._sort=r.first)}},decls:34,vars:10,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pb-22","sm:pt-12","sm:pb-28","sm:px-10","bg-mine-50","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"whitespace-nowrap","text-primary-700"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["class","ml-4 rounded-sm bg-primary-700","mat-raised-button","",3,"click",4,"ngxPermissionsOnly"],[1,"flex-auto","p-6","-mt-16","bg-mine-200","shadow","sm:p-10","rounded-t-2xl"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","w-full","filter-post"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"flex","flex-col","mx-4","mt-6","mb-3","sm:mx-8"],[1,"flex","items-start"],[1,"border-none","fuse-mat-dense","fuse-mat-no-subscript","w-100"],["matInput","","type","text",3,"formControl","autocomplete","placeholder"],[1,"overflow-y-auto","max-h-120"],[4,"ngIf","ngIfElse"],["norole",""],["mat-raised-button","",1,"ml-4","rounded-sm","bg-primary-700",3,"click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","role-grid","role-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"text-center"],[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","role-grid","role-table","md:px-8"],[1,"hidden","truncate","sm:block"],[1,"truncate"],["style","justify-content: center;","class","flex flex-row gap-2",4,"ngIf"],[1,"flex","flex-row","gap-2",2,"justify-content","center"],["class","px-2 leading-6  min-w-10 min-h-7 h-7","mat-stroked-button","",3,"click",4,"ngxPermissionsOnly"],["disabled","","class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","","matTooltip","Proximamente",4,"ngxPermissionsExcept"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],["disabled","","mat-stroked-button","","matTooltip","Proximamente",1,"px-2","leading-6","min-w-10","min-h-7","h-7"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e.TgZ(4,"div",3),e.TgZ(5,"div"),e.TgZ(6,"a",4),e._uU(7,"Usuarios"),e.qZA(),e.qZA(),e.TgZ(8,"div",5),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Roles"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",8),e.TgZ(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"h2",12),e._uU(19," Gesti\xf3n de Roles "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",13),e.YNc(21,ao,4,1,"button",14),e.qZA(),e.qZA(),e.TgZ(22,"div",15),e.TgZ(23,"div",16),e.TgZ(24,"ath-card",17),e.YNc(25,lo,2,1,"div",18),e.TgZ(26,"div",19),e.TgZ(27,"div",20),e.TgZ(28,"mat-form-field",21),e._UZ(29,"input",22),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",23),e.YNc(31,_o,11,4,"ng-container",24),e.YNc(32,vo,2,0,"ng-template",null,25,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t){const r=e.MAs(33);e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(7),e.Q6J("ngxPermissionsOnly","ManagementCreate"),e.xp6(4),e.Q6J("ngIf",i.isLoading),e.xp6(4),e.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","T\xedtulo..."),e.xp6(2),e.Q6J("ngIf",i.role$)("ngIfElse",r)}},directives:[to.PQ,P.Hw,H.yS,oo.gE,F.lW,io.w,T.O5,ro.pW,b.KE,E.Nt,p.Fj,p.JJ,p.oH,Q.YE,Q.nU,T.sg,so.gM],pipes:[T.Ov],encapsulation:2,data:{animation:Se.p},changeDetection:0}),n})(),resolve:{roles:a(3668).N}}],Ro={suppressScrollX:!0};let bo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[{provide:Te.sG,useValue:{parse:{dateInput:Me().ISO_8601},display:{dateInput:"LL",monthYearLabel:"MMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}}},{provide:N.op,useValue:Ro}],imports:[[T.ez,H.Bz.forChild(To),F.ot,Re.FA,C.Is,b.lN,P.Ps,E.c,be.Yd,Ce.LD,ye.j,N.Xd,we.m]]}),n})()}}]);