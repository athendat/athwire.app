"use strict";(self.webpackChunkath=self.webpackChunkath||[]).push([[395],{9395:(Oe,y,l)=>{l.r(y),l.d(y,{AccountsModule:()=>Qe});var h=l(5357),R=l(2455),r=l(3075),w=l(6087),x=l(4847),A=l(7579),u=l(2722),U=l(5700),p=l(8966);let B=o=>crypto.getRandomValues(new Uint8Array(o));var v=l(5736),F=l(7489),e=l(5e3),b=l(3238),T=l(7967),D=l(7495),m=l(9808),d=l(7322),I=l(7531),q=l(6856),J=l(4107),Q=l(508),C=l(7423);function V(o,a){1&o&&(e.TgZ(0,"h2",6),e._uU(1,"Agregar operaci\xf3n"),e.qZA())}function L(o,a){1&o&&(e.TgZ(0,"h2",6),e._uU(1,"Editar operaci\xf3n"),e.qZA())}function H(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Seleccionar la fecha de la operaci\xf3n es obligatorio. "),e.qZA())}function z(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar un tipo de operaci\xf3n. "),e.qZA())}function G(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El monto de la operaci\xf3n es obligatorio. "),e.qZA())}function W(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El valor de la operaci\xf3n debe ser mayor que 0. "),e.qZA())}function K(o,a){if(1&o&&(e.TgZ(0,"div",7),e.TgZ(1,"div",8),e.TgZ(2,"form",9),e.TgZ(3,"div",10),e.TgZ(4,"div",11),e.TgZ(5,"mat-form-field",12),e.TgZ(6,"mat-label"),e._uU(7,"Fecha de la operaci\xf3n"),e.qZA(),e._UZ(8,"input",13),e._UZ(9,"mat-datepicker-toggle",14),e._UZ(10,"mat-datepicker",15,16),e.YNc(12,H,2,0,"mat-error",5),e.qZA(),e.qZA(),e.TgZ(13,"div",11),e.TgZ(14,"mat-form-field",12),e.TgZ(15,"mat-label"),e._uU(16,"Fecha valor"),e.qZA(),e._UZ(17,"input",13),e._UZ(18,"mat-datepicker-toggle",14),e._UZ(19,"mat-datepicker",15,17),e.TgZ(21,"mat-hint"),e._uU(22,"Fecha en la que estar\xe1n disponibles los fondos."),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",11),e.TgZ(24,"mat-form-field",12),e.TgZ(25,"mat-label"),e._uU(26,"Origen"),e.qZA(),e._UZ(27,"input",18),e.TgZ(28,"mat-hint"),e._uU(29,"Si la operaci\xf3n es un cr\xe9dito puede reflejar el origen de los fondos."),e.qZA(),e.qZA(),e.qZA(),e.TgZ(30,"div",11),e.TgZ(31,"mat-form-field",12),e.TgZ(32,"mat-label"),e._uU(33,"Destino"),e.qZA(),e._UZ(34,"input",18),e.TgZ(35,"mat-hint"),e._uU(36,"Si la operaci\xf3n es un D\xe9bito puede reflejar el destino de los fondos."),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",11),e.TgZ(38,"mat-form-field",12),e.TgZ(39,"mat-label"),e._uU(40,"Tipo de operaci\xf3n"),e.qZA(),e.TgZ(41,"mat-select",19),e.TgZ(42,"mat-option",20),e._uU(43,"Cr\xe9dito"),e.qZA(),e.TgZ(44,"mat-option",20),e._uU(45,"D\xe9bito"),e.qZA(),e.qZA(),e.YNc(46,z,2,0,"mat-error",5),e.qZA(),e.qZA(),e.TgZ(47,"div",11),e.TgZ(48,"mat-form-field",12),e.TgZ(49,"mat-label"),e._uU(50,"Valor de la operaci\xf3n"),e.qZA(),e._UZ(51,"input",21),e.YNc(52,G,2,0,"mat-error",5),e.YNc(53,W,2,0,"mat-error",5),e.qZA(),e.qZA(),e.TgZ(54,"div",11),e.TgZ(55,"mat-form-field",12),e.TgZ(56,"mat-label"),e._uU(57,"Balance inicial"),e.qZA(),e._UZ(58,"input",22),e.qZA(),e.qZA(),e.TgZ(59,"div",11),e.TgZ(60,"mat-form-field",12),e.TgZ(61,"mat-label"),e._uU(62,"Balance final"),e.qZA(),e._UZ(63,"input",21),e.qZA(),e.qZA(),e.TgZ(64,"div",23),e.TgZ(65,"mat-form-field",24),e.TgZ(66,"mat-label"),e._uU(67,"Descripci\xf3n"),e.qZA(),e._UZ(68,"textarea",25),e.TgZ(69,"mat-hint"),e._uU(70,"Agregue cualquier comentario que considere necesario sobre esta operaci\xf3n."),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.MAs(11),n=e.MAs(20),i=e.oxw();e.xp6(2),e.Q6J("formGroup",i.operationForm)("autocomplete","off"),e.xp6(6),e.Q6J("formControlName","date")("min",i.currentDate)("matDatepicker",t),e.xp6(1),e.Q6J("for",t),e.xp6(3),e.Q6J("ngIf",i.operationForm.get("date").hasError("required")),e.xp6(5),e.Q6J("formControlName","valueDate")("min",i.currentDate)("matDatepicker",n),e.xp6(1),e.Q6J("for",n),e.xp6(9),e.Q6J("formControlName","origin")("type","text"),e.xp6(7),e.Q6J("formControlName","destiny")("type","text"),e.xp6(7),e.Q6J("formControlName","operationType"),e.xp6(1),e.Q6J("value","Cr\xe9dito"),e.xp6(2),e.Q6J("value","D\xe9bito"),e.xp6(2),e.Q6J("ngIf",i.operationForm.get("operationType").hasError("required")),e.xp6(5),e.Q6J("formControlName","amount")("type","number")("min",0),e.xp6(1),e.Q6J("ngIf",i.operationForm.get("amount").hasError("required")),e.xp6(1),e.Q6J("ngIf",i.operationForm.get("amount").hasError("min")),e.xp6(5),e.Q6J("type","number")("min",0),e.xp6(5),e.Q6J("formControlName","endBalance")("type","number")("min",0),e.xp6(5),e.Q6J("formControlName","description")}}const N=function(o){return{"cursor-not-allowed":o}};function X(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).updateOperation()}),e._uU(1,"Actualizar"),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(2,N,t.operationForm.invalid))("disabled",t.operationForm.invalid)}}function P(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).createOperation()}),e._uU(1,"Agregar"),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(2,N,t.operationForm.invalid))("disabled",t.operationForm.invalid)}}function ee(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",26),e.TgZ(2,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeDialog()}),e._uU(3,"Cancelar"),e.qZA(),e.YNc(4,X,2,4,"button",28),e.YNc(5,P,2,4,"button",28),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("color","warn"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}const te=((o,a=21)=>((o,a,t)=>{let n=(2<<Math.log(o.length-1)/Math.LN2)-1,i=-~(1.6*n*a/o.length);return(c=a)=>{let s="";for(;;){let g=t(i),_=i;for(;_--;)if(s+=o[g[_]&n]||"",s.length===c)return s}}})("1234567890abcdef",a,B))(0,8);let oe=(()=>{class o{constructor(t,n,i,c,s,g,_){this.data=t,this._accountsService=n,this._athConfirmationService=i,this._changeDetectorRef=c,this._dialogRef=s,this._formBuilder=g,this._userService=_,this.amountFieldState=!0,this.currentDate=new Date,this.operation=v.$w,this._unsubscribeAll=new A.x,this.account=this.data.account,this.dialogMode=t.dialogMode,t.operation&&(this.operation=this.data.operation)}ngOnInit(){this._userService.user$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this._user=t,this._changeDetectorRef.markForCheck()}),this.operationForm=this._formBuilder.group({_id:[null],accountId:[this.account._id,[r.kI.required]],userId:[this._user._id,[r.kI.required]],reference:[te(),[r.kI.required]],date:[{disabled:!0,value:null},[r.kI.required]],valueDate:[{disabled:!0,value:null}],description:[null,[r.kI.maxLength(1e3)]],origin:[null],destiny:[null],operationType:[null,[r.kI.required]],currency:[this.account.currency,[r.kI.required]],amount:[{disabled:this.amountFieldState,value:0},[r.kI.required,r.kI.min(0)]],initBalance:[{disabled:!0,value:this.account.balance},[r.kI.required,r.kI.min(0)]],endBalance:[{disabled:!0,value:this.account.balance},[r.kI.required,r.kI.min(0)]]}),this.operationForm.get("operationType").valueChanges.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.operationForm.get("amount").enable();let n=this.operationForm.get("initBalance").value;const i=this.operationForm.get("amount").value;if("Cr\xe9dito"===t){const c=parseInt(n,10)+parseInt(i,10);this.operationForm.get("endBalance").setValue(c)}"D\xe9bito"===t&&this.operationForm.get("endBalance").setValue(n-=parseInt(i,10))}),this.operationForm.get("amount").valueChanges.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{const n=this.operationForm.get("operationType").value;let i=this.operationForm.get("initBalance").value;if("Cr\xe9dito"===n){const c=parseInt(i,10)+parseInt(t,10);this.operationForm.get("endBalance").setValue(c)}"D\xe9bito"===n&&this.operationForm.get("endBalance").setValue(i-=parseInt(t,10))}),"edit"===this.dialogMode&&this.operationForm.patchValue(this.operation)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createOperation(){let t=this.operationForm.getRawValue();t=(0,F.omit)(t,["_id"]),console.log(t),this._athConfirmationService.open({title:"Crear operaci\xf3n",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,u.R)(this._unsubscribeAll)).subscribe(i=>{"confirmed"===i&&this._accountsService.createOperation(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(()=>{this._athConfirmationService.open({title:"Confirmaci\xf3n",message:"Operaci\xf3n agregada correctamente.",icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck(),this.closeDialog()},c=>{let s;console.warn(c),s=c.error?c.error.title:c.message,this._athConfirmationService.open({title:`${c.statusText}: ${c.status}`,message:s,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})})})}updateOperation(){const t=this.operationForm.getRawValue();this._athConfirmationService.open({title:"Actualizar operaci\xf3n",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._accountsService.updateAccount(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(()=>{this._athConfirmationService.open({title:"Confirmaci\xf3n",message:"Operaci\xf3n actualizada correctamente",icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this.closeDialog(),this._changeDetectorRef.markForCheck()},c=>{let s;this.closeDialog(),s=c.error?c.error.message:c.message})})}removeOperation(){const t=this.account;this._athConfirmationService.open({title:"Actualizar operaci\xf3n",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._accountsService.updateAccount(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(()=>{this._athConfirmationService.open({title:"Confirmaci\xf3n",message:"Operaci\xf3n eliminada correctamente",icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this.closeDialog(),this._changeDetectorRef.markForCheck()},c=>{let s;s=c.error?c.error.message:c.message,this._athConfirmationService.open({title:`${c.statusText}: ${c.status}`,message:s,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.WI),e.Y36(b.i),e.Y36(T.C),e.Y36(e.sBO),e.Y36(p.so),e.Y36(r.qu),e.Y36(D.K))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ath-account-operation-dialog"]],decls:9,vars:4,consts:[[1,"relative","flex","flex-col","w-full","max-h-screen"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["mat-dialog-title","",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],["mat-dialog-title",""],[1,"w-full","overflow-hidden"],[1,"flex","border-t"],[1,"flex","flex-col","w-full","pt-8",3,"formGroup","autocomplete"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],[1,""],[1,"w-full"],["matInput","","require","",3,"formControlName","min","matDatepicker"],["matPrefix","",3,"for"],["touchUi","","disabled","false"],["date",""],["valueDate",""],["matInput","","require","",3,"formControlName","type"],["require","",3,"formControlName"],[3,"value"],["matInput","","require","",3,"formControlName","type","min"],["matInput","","formControlName","initBalance","require","",3,"type","min"],[1,"col-span-1","sm:col-span-2"],[1,"w-full","fuse-mat-textarea"],["matInput","",3,"formControlName"],[1,"flex","items-center","justify-between","w-full","px-8","py-4","bg-gray-50"],["mat-button","",1,"-ml-4","rounded-sm",3,"color","click"],["class","text-mine-900 rounded-sm bg-primary-700 ","mat-flat-button","",3,"ngClass","disabled","click",4,"ngIf"],["mat-flat-button","",1,"text-mine-900","rounded-sm","bg-primary-700",3,"ngClass","disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,V,2,0,"h2",2),e.YNc(4,L,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,K,71,30,"div",4),e.BQk(),e.qZA(),e.YNc(8,ee,6,3,"ng-container",5),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===n.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===n.dialogMode),e.xp6(3),e.Q6J("ngIf","view"!==n.dialogMode),e.xp6(1),e.Q6J("ngIf","view"!==n.data.dialogMode))},directives:[m.O5,p.uh,r._Y,r.JL,r.sg,d.KE,d.hX,I.Nt,r.Fj,q.hl,r.JJ,r.u,q.nW,d.qo,q.Mq,d.TO,d.bx,J.gD,Q.ey,C.lW,m.mk],encapsulation:2,changeDetection:0}),o})();var O=l(1927),E=l(5620),S=l(5303),M=l(5245),f=l(2181);function ne(o,a){if(1&o&&(e.ynx(0),e._uU(1),e.ALo(2,"number"),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.amount,"1.2-2")||""," ")}}function ie(o,a){if(1&o&&(e.ynx(0),e._uU(1),e.ALo(2,"number"),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" -",e.xi3(2,1,t.amount,"1.2-2")||""," ")}}function ce(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",36),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(2).editOperation(c)}),e.TgZ(2,"div",32),e._uU(3),e.ALo(4,"date"),e.qZA(),e.TgZ(5,"div",33),e._uU(6),e.qZA(),e.TgZ(7,"div",33),e._uU(8),e.qZA(),e.TgZ(9,"div",34),e._uU(10),e.ALo(11,"number"),e.qZA(),e.TgZ(12,"div",34),e.YNc(13,ne,3,4,"ng-container",37),e.qZA(),e.TgZ(14,"div",38),e.YNc(15,ie,3,4,"ng-container",37),e.qZA(),e.TgZ(16,"div",32),e._uU(17),e.ALo(18,"number"),e.qZA(),e.qZA(),e.BQk()}if(2&o){const t=a.$implicit;e.xp6(3),e.hij(" ",e.xi3(4,7,t.date,"dd/MM/yyyy")," "),e.xp6(3),e.hij(" ",t.origin||""," "),e.xp6(2),e.hij(" ",t.destiny||""," "),e.xp6(2),e.hij(" ",e.xi3(11,10,t.initBalance,"1.2-2")||""," "),e.xp6(3),e.Q6J("ngIf","Cr\xe9dito"===t.operationType),e.xp6(2),e.Q6J("ngIf","D\xe9bito"===t.operationType),e.xp6(2),e.hij(" ",e.xi3(18,13,t.endBalance,"1.2-2")||""," ")}}function ae(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",23),e.TgZ(2,"div",24),e._uU(3,"Registro de operaciones de la cuenta"),e.qZA(),e.TgZ(4,"div",25),e.TgZ(5,"button",26),e._UZ(6,"mat-icon",27),e.qZA(),e.TgZ(7,"mat-menu",null,28),e.TgZ(9,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().exportAsExcelFile()}),e._uU(10,"Exportar a excel"),e.qZA(),e.TgZ(11,"button",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().exportAsCsvFile()}),e._uU(12,"Exportar a csv"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",30),e.TgZ(14,"div",31),e.TgZ(15,"div",32),e._uU(16," Fecha de la operaci\xf3n "),e.qZA(),e.TgZ(17,"div",33),e._uU(18," Origen de los fondos "),e.qZA(),e.TgZ(19,"div",33),e._uU(20," Destino de los fondos "),e.qZA(),e.TgZ(21,"div",34),e._uU(22," Saldo inicial "),e.qZA(),e.TgZ(23,"div",34),e._uU(24," Cr\xe9dito "),e.qZA(),e.TgZ(25,"div",34),e._uU(26," D\xe9bito "),e.qZA(),e.TgZ(27,"div",32),e._uU(28," Saldo final "),e.qZA(),e.qZA(),e.YNc(29,ce,19,16,"ng-container",35),e.qZA(),e.BQk()}if(2&o){const t=e.MAs(8),n=e.oxw();e.xp6(5),e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:dots-vertical"),e.xp6(23),e.Q6J("ngForOf",n.operations)("ngForTrackBy",n.trackByFn)}}function re(o,a){1&o&&(e.TgZ(0,"div",39),e._UZ(1,"mat-icon",40),e.TgZ(2,"div",41),e._uU(3,"A\xfan no se han registrado operaci\xf3n para esta cuenta!"),e.qZA(),e.qZA()),2&o&&(e.xp6(1),e.Q6J("svgIcon","iconsmind:billing"))}let se=(()=>{class o{constructor(t,n,i,c,s,g,_){this._accountDialog=t,this._accountsService=n,this._athConfirmationService=i,this._changeDetectorRef=c,this._fileSaverService=s,this._router=g,this.store=_,this.account=null,this.emptyAccount=v.AR,this.operations=[],this.searchInputControl=new r.NI,this.selectedAccount=null,this._unsubscribeAll=new A.x}ngOnInit(){this.account$=this._accountsService.account$,this._accountsService.operations$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.operations=t,this._changeDetectorRef.markForCheck()}),this.store.select("account").pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{null!==t.account&&(this.account=t.account,this._changeDetectorRef.markForCheck())}),this._accountsService.pagination$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createOperation(){this.openDialog("add","90%",this.account)}editOperation(t){this.openDialog("edit","90%",this.account,t)}exportAsExcelFile(){this._fileSaverService.exportAsExcelFile(this.operations,"operations")}exportAsCsvFile(){this._fileSaverService.exportAsCsvFile(this.operations,"operations")}openDialog(t,n,i,c){this._accountDialog.open(oe,{data:{account:i,operation:c,dialogMode:t},width:n,panelClass:"ath-dialog-panel"})}trackByFn(t,n){return n.id||t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.uw),e.Y36(b.i),e.Y36(T.C),e.Y36(e.sBO),e.Y36(O.m),e.Y36(h.F0),e.Y36(E.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ath-account-detail"]],viewQuery:function(t,n){if(1&t&&(e.Gf(w.NW,5),e.Gf(x.YE,5)),2&t){let i;e.iGM(i=e.CRH())&&(n._paginator=i.first),e.iGM(i=e.CRH())&&(n._sort=i.first)}},decls:38,vars:15,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pb-22","sm:pt-12","sm:pb-28","sm:px-10","bg-mine-50","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"ml-1","text-primary-700","hover:underline",3,"routerLink"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-700"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"mt-2","flex","flex-col"],[1,"font-medium"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["mat-button","",1,"ml-4","rounded-sm","bg-primary-700",3,"click"],[1,"text-mine-900",3,"svgIcon"],[1,"ml-2","mr-1","text-lg","text-mine-900"],[1,"flex-auto","p-6","-mt-16","bg-mine-200","shadow","sm:p-10","rounded-t-2xl"],[1,"w-full","p-8","md:p-16","shadow","rounded-2xl","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[4,"ngIf","ngIfElse"],["noOperations",""],[1,"flex","items-center","justify-between","mb-5"],[1,"text-2xl","font-semibold","leading-tight"],[1,"-mr-3"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["listOperationsMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","operations-grid","md:px-8","text-md","text-secondary","bg-mine-50","dark:bg-black","dark:bg-opacity-5"],[1,"text-center"],[1,"hidden","lg:block"],[1,"hidden","text-center","sm:block"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","operations-grid","md:px-8","cursor-pointer","hover:bg-primary-50",3,"click"],[4,"ngIf"],[1,"hidden","text-center","sm:block","text-red-500"],[1,"flex","flex-auto","flex-col","items-center","justify-center","h-full"],[1,"icon-size-24",3,"svgIcon"],[1,"mt-4","text-2xl","font-semibold","tracking-tight","text-secondary"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"a",5),e._uU(7,"Cuentas"),e.qZA(),e.qZA(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(12,"div",8),e.TgZ(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"h2",12),e._uU(19),e.qZA(),e.qZA(),e.TgZ(20,"div",13),e.TgZ(21,"span",14),e._uU(22),e.qZA(),e.TgZ(23,"span",14),e._uU(24),e.qZA(),e.TgZ(25,"span",14),e._uU(26),e.ALo(27,"number"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",15),e.TgZ(29,"button",16),e.NdJ("click",function(){return n.createOperation()}),e._UZ(30,"mat-icon",17),e.TgZ(31,"span",18),e._uU(32,"Agregar operaci\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(33,"div",19),e.TgZ(34,"div",20),e.YNc(35,ae,30,4,"ng-container",21),e.YNc(36,re,4,1,"ng-template",null,22,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const i=e.MAs(37);e.xp6(6),e.Q6J("routerLink","/accounts"),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(2),e.Oqu(n.account.name),e.xp6(2),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(5),e.hij(" ",n.account.name," "),e.xp6(3),e.hij("Moneda de la cuenta - ",n.account.currency,""),e.xp6(2),e.hij("Cantidad de operaciones - ",n.operations.length,""),e.xp6(2),e.hij("Balance de la cuenta - ",e.xi3(27,12,n.account.balance,"1.2-2"),""),e.xp6(4),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",n.operations.length>0)("ngIfElse",i)}},directives:[S.PQ,h.yS,M.Hw,C.lW,m.O5,f.p6,f.VK,f.OP,x.YE,m.sg],pipes:[m.JJ,m.uU],encapsulation:2,data:{animation:U.p},changeDetection:0}),o})();var le=l(2368);function ue(o,a){1&o&&(e.TgZ(0,"h2",6),e._uU(1,"Agregar cuenta"),e.qZA())}function me(o,a){1&o&&(e.TgZ(0,"h2",6),e._uU(1,"Editar cuenta"),e.qZA())}function ge(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre de la cuenta es obligatorio. "),e.qZA())}function pe(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-option",16),e._uU(2),e.qZA(),e.BQk()),2&o){const t=a.$implicit;e.xp6(1),e.Q6J("value",t._id),e.xp6(1),e.AsE("",t.name," ",t.lastname,"")}}function de(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe asignar un responsable a la cuenta. "),e.qZA())}function _e(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar la moneda de la cuenta. "),e.qZA())}function fe(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El monto del balance inicial es obligatorio. "),e.qZA())}function he(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El monto del balance inicial debe ser mayor que 0. "),e.qZA())}function xe(o,a){if(1&o&&(e.TgZ(0,"div",7),e.TgZ(1,"div",8),e.TgZ(2,"form",9),e.TgZ(3,"div",10),e.TgZ(4,"div",11),e.TgZ(5,"mat-form-field",12),e.TgZ(6,"mat-label"),e._uU(7,"Nombre de la cuenta"),e.qZA(),e._UZ(8,"input",13),e.YNc(9,ge,2,0,"mat-error",5),e.qZA(),e.qZA(),e.TgZ(10,"div",11),e.TgZ(11,"mat-form-field",12),e.TgZ(12,"mat-label"),e._uU(13,"Responsable de la cuenta"),e.qZA(),e.TgZ(14,"mat-select",14),e.YNc(15,pe,3,3,"ng-container",15),e.qZA(),e.YNc(16,de,2,0,"mat-error",5),e.qZA(),e.qZA(),e.TgZ(17,"div",11),e.TgZ(18,"mat-form-field",12),e.TgZ(19,"mat-label"),e._uU(20,"Moneda de la cuenta"),e.qZA(),e.TgZ(21,"mat-select",14),e.TgZ(22,"mat-option",16),e._uU(23,"USD"),e.qZA(),e.TgZ(24,"mat-option",16),e._uU(25,"EUR"),e.qZA(),e.TgZ(26,"mat-option",16),e._uU(27,"MXN"),e.qZA(),e.qZA(),e.YNc(28,_e,2,0,"mat-error",5),e.qZA(),e.qZA(),e.TgZ(29,"div",11),e.TgZ(30,"mat-form-field",12),e.TgZ(31,"mat-label"),e._uU(32,"Balance inicial"),e.qZA(),e._UZ(33,"input",17),e.YNc(34,fe,2,0,"mat-error",5),e.YNc(35,he,2,0,"mat-error",5),e.qZA(),e.qZA(),e.TgZ(36,"div",11),e.TgZ(37,"div",18),e.TgZ(38,"span",19),e._uU(39,"Estado"),e.qZA(),e.TgZ(40,"mat-slide-toggle",20),e._uU(41),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.accountForm)("autocomplete","off"),e.xp6(6),e.Q6J("formControlName","name")("type","text"),e.xp6(1),e.Q6J("ngIf",t.accountForm.get("name").hasError("required")),e.xp6(5),e.Q6J("formControlName","owner"),e.xp6(1),e.Q6J("ngForOf",t.users),e.xp6(1),e.Q6J("ngIf",t.accountForm.get("owner").hasError("required")),e.xp6(5),e.Q6J("formControlName","currency"),e.xp6(1),e.Q6J("value","USD"),e.xp6(2),e.Q6J("value","EUR"),e.xp6(2),e.Q6J("value","MXN"),e.xp6(2),e.Q6J("ngIf",t.accountForm.get("currency").hasError("required")),e.xp6(5),e.Q6J("formControlName","balance")("type","number")("min",0),e.xp6(1),e.Q6J("ngIf",t.accountForm.get("balance").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.accountForm.get("balance").hasError("min")),e.xp6(5),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===t.accountForm.get("active").value?"Activo":"Inactivo"," ")}}const Y=function(o){return{"cursor-not-allowed":o}};function Ze(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).updateAccount()}),e._uU(1,"Actualizar"),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(2,Y,t.accountForm.invalid))("disabled",t.accountForm.invalid)}}function Ae(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).createAccount()}),e._uU(1,"Agregar"),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(2,Y,t.accountForm.invalid))("disabled",t.accountForm.invalid)}}function ve(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",21),e.TgZ(2,"button",22),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeDialog()}),e._uU(3,"Cancelar"),e.qZA(),e.YNc(4,Ze,2,4,"button",23),e.YNc(5,Ae,2,4,"button",23),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("color","warn"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let be=(()=>{class o{constructor(t,n,i,c,s,g,_,Ne){this.data=t,this._accountsService=n,this._changeDetectorRef=i,this._dialogRef=c,this._formBuilder=s,this._athConfirmationService=g,this._userService=_,this.store=Ne,this.users=[],this._unsubscribeAll=new A.x,this.dialogMode=t.dialogMode,this.account=this.data.account}ngOnInit(){this._userService.user$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this._user=t,this._changeDetectorRef.markForCheck()}),this.store.select("user").pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{null!==t.users&&(this.users=t.users,this._changeDetectorRef.markForCheck())}),this.accountForm=this._formBuilder.group({_id:[null],active:[!0,[r.kI.required]],userId:[this._user._id,[r.kI.required]],currency:[null,[r.kI.required]],name:[null,[r.kI.required,r.kI.maxLength(250)]],owner:[null,[r.kI.required]],balance:[0,[r.kI.required,r.kI.min(0)]],operations:[null],createdAt:[null],updatedAt:[null]}),"edit"===this.dialogMode&&(this.accountForm.patchValue(this.account),this.accountForm.get("owner").patchValue(this.account.owner._id))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createAccount(){let t=this.accountForm.getRawValue();t=(0,F.omit)(t,["_id","createdAt","updatedAt"]),t.userId=this._user._id,this._athConfirmationService.open({title:"Crear cuenta",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,u.R)(this._unsubscribeAll)).subscribe(i=>{"confirmed"===i&&this._accountsService.createAccount(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(c=>{this._athConfirmationService.open({title:"Confirmaci\xf3n",message:c.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck(),this.closeDialog()},c=>{let s;console.warn(c),s=c.error?c.error.title:c.message,this._athConfirmationService.open({title:`${c.statusText}: ${c.status}`,message:s,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})})})}updateAccount(){const t=this.accountForm.getRawValue();this._athConfirmationService.open({title:"Actualizar cuenta",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._accountsService.updateAccount(t).pipe((0,u.R)(this._unsubscribeAll)).subscribe(c=>{this._athConfirmationService.open({title:"Confirmaci\xf3n",message:c.message,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this.closeDialog(),this._changeDetectorRef.markForCheck()},c=>{let s;s=c.error?c.error.message:c.message,this._athConfirmationService.open({title:`${c.statusText}: ${c.status}`,message:s,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.WI),e.Y36(b.i),e.Y36(e.sBO),e.Y36(p.so),e.Y36(r.qu),e.Y36(T.C),e.Y36(D.K),e.Y36(E.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ath-account-dialog"]],decls:9,vars:4,consts:[[1,"relative","flex","flex-col","w-full","max-h-screen"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["mat-dialog-title","",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],["mat-dialog-title",""],[1,"w-full","overflow-hidden"],[1,"flex","border-t"],[1,"flex","flex-col","w-full","pt-8",3,"formGroup","autocomplete"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-x-4"],[1,""],[1,"w-full"],["matInput","","require","",3,"formControlName","type"],["require","",3,"formControlName"],[4,"ngFor","ngForOf"],[3,"value"],["matInput","","require","",3,"formControlName","type","min"],[1,"flex","flex-col"],[1,"mb-4","font-medium"],[3,"formControlName","color"],[1,"flex","items-center","justify-between","w-full","px-8","py-4","bg-gray-50"],["mat-button","",1,"-ml-4","rounded-sm",3,"color","click"],["class","text-mine-900 rounded-sm bg-primary-700","mat-flat-button","",3,"ngClass","disabled","click",4,"ngIf"],["mat-flat-button","",1,"text-mine-900","rounded-sm","bg-primary-700",3,"ngClass","disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,ue,2,0,"h2",2),e.YNc(4,me,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,xe,42,21,"div",4),e.BQk(),e.qZA(),e.YNc(8,ve,6,3,"ng-container",5),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",!n.data.account._id&&"add"===n.dialogMode),e.xp6(1),e.Q6J("ngIf",n.data.account._id&&"edit"===n.dialogMode),e.xp6(3),e.Q6J("ngIf","view"!==n.dialogMode),e.xp6(1),e.Q6J("ngIf","view"!==n.data.dialogMode))},directives:[m.O5,p.uh,r._Y,r.JL,r.sg,d.KE,d.hX,I.Nt,r.Fj,r.JJ,r.u,d.TO,J.gD,m.sg,Q.ey,le.Rr,C.lW,m.mk],encapsulation:2,changeDetection:0}),o})();var Te=l(7238);function Ce(o,a){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",44),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function qe(o,a){1&o&&(e.ynx(0),e._UZ(1,"mat-icon",45),e.BQk()),2&o&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function ke(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",36),e.TgZ(2,"div",37),e._uU(3),e.qZA(),e.TgZ(4,"div",30),e._uU(5),e.qZA(),e.TgZ(6,"div",38),e._uU(7),e.ALo(8,"number"),e.qZA(),e.TgZ(9,"div",32),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"div",33),e.YNc(13,Ce,2,1,"ng-container",24),e.YNc(14,qe,2,1,"ng-container",24),e.qZA(),e.TgZ(15,"div",39),e.TgZ(16,"button",40),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(4).navigateToStatement(c._id)}),e._UZ(17,"mat-icon",21),e.qZA(),e.TgZ(18,"button",41),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(4).navigateToAccount(c._id)}),e._UZ(19,"mat-icon",21),e.qZA(),e.TgZ(20,"button",42),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(4).editAccount(c)}),e._UZ(21,"mat-icon",21),e.qZA(),e.TgZ(22,"button",43),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw(4).deleteAccount(c)}),e._UZ(23,"mat-icon",21),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&o){const t=a.$implicit;e.xp6(3),e.hij(" ",t.name," "),e.xp6(2),e.AsE(" ",t.owner.name," ",t.owner.lastname," "),e.xp6(2),e.AsE(" ",t.currency," ",e.xi3(8,12,t.balance,"1.2-2")," "),e.xp6(3),e.hij(" ",e.xi3(11,15,t.updatedAt,"dd/MM/yyyy")," "),e.xp6(3),e.Q6J("ngIf",t.active),e.xp6(1),e.Q6J("ngIf",!t.active),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:scale"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:eye"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function ye(o,a){if(1&o&&(e.ynx(0),e.YNc(1,ke,24,18,"ng-container",35),e.BQk()),2&o){const t=a.ngIf,n=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",n.trackByFn)}}function we(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"div",27),e.TgZ(2,"div",28),e.TgZ(3,"div",29),e._uU(4," Nombre de la cuenta "),e.qZA(),e.TgZ(5,"div",30),e._uU(6," Responsable "),e.qZA(),e.TgZ(7,"div",31),e._uU(8," Saldo contable "),e.qZA(),e.TgZ(9,"div",32),e._uU(10," Fecha de \xfaltimo movimiento "),e.qZA(),e.TgZ(11,"div",33),e._uU(12," Activa "),e.qZA(),e.TgZ(13,"div",34),e._uU(14," Acciones "),e.qZA(),e.qZA(),e.YNc(15,ye,2,2,"ng-container",24),e.ALo(16,"async"),e.qZA(),e.BQk()),2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","name"),e.xp6(4),e.Q6J("mat-sort-header","balance"),e.xp6(8),e.Q6J("ngIf",e.lcZ(16,3,t.accounts$))}}function Ue(o,a){if(1&o&&(e.ynx(0),e.YNc(1,we,17,5,"ng-container",26),e.BQk()),2&o){const t=a.ngIf;e.oxw();const n=e.MAs(38);e.xp6(1),e.Q6J("ngIf",t)("ngIfElse",n)}}function Fe(o,a){1&o&&(e.TgZ(0,"div",46),e._uU(1,"A\xfan no ha creado ninguna cuenta!"),e.qZA())}let De=(()=>{class o{constructor(t,n,i,c,s,g){this._accountDialog=t,this._accountsService=n,this._athConfirmationService=i,this._changeDetectorRef=c,this._fileSaverService=s,this._router=g,this.accounts=[],this.emptyAccount=v.AR,this.searchInputControl=new r.NI,this.selectedAccount=null,this._unsubscribeAll=new A.x}ngOnInit(){this.accounts$=this._accountsService.accounts$,this._accountsService.accounts$.pipe((0,u.R)(this._unsubscribeAll)).subscribe(t=>{this.accounts=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createAccount(){this.openDialog(v.AR,"add","90%")}editAccount(t){this.openDialog(t,"edit","90%")}openDialog(t,n,i){this._accountDialog.open(be,{data:{account:t,dialogMode:n},width:i,panelClass:"ath-dialog-panel"})}navigateToAccount(t){this._router.navigateByUrl(`/accounts/${t}`)}navigateToStatement(t){this._router.navigateByUrl(`/accounts/${t}/statement`)}exportAsExcelFile(){this._fileSaverService.exportAsExcelFile(this.accounts,"accounts")}exportAsCsvFile(){this._fileSaverService.exportAsCsvFile(this.accounts,"accounts")}deleteAccount(t){this._athConfirmationService.open({title:"Eliminar cuenta",message:`\xbfEst\xe1 seguro que desea eliminar el cuenta ${t.name}?`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._accountsService.deleteAccount(t._id).subscribe(c=>{!c||(this._athConfirmationService.open({title:"Confirmaci\xf3n",message:`Cuenta ${t.name} eliminado correctamente`,icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck())},c=>{console.warn(c),this._athConfirmationService.open({title:`${c.statusText}: ${c.status}`,message:c.error.message,icon:{show:!0,name:"heroicons_outline:exclamation-circle",color:"error"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})})}),this._changeDetectorRef.markForCheck()}trackByFn(t,n){return n.id||t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.uw),e.Y36(b.i),e.Y36(T.C),e.Y36(e.sBO),e.Y36(O.m),e.Y36(h.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ath-accounts"]],viewQuery:function(t,n){if(1&t&&(e.Gf(w.NW,5),e.Gf(x.YE,5)),2&t){let i;e.iGM(i=e.CRH())&&(n._paginator=i.first),e.iGM(i=e.CRH())&&(n._sort=i.first)}},decls:39,vars:8,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","pb-22","sm:pt-12","sm:pb-28","sm:px-10","bg-mine-50","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"whitespace-nowrap","text-primary-700"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["mat-button","",1,"ml-4","rounded-sm","bg-primary-700",3,"click"],[1,"text-mine-900",3,"svgIcon"],[1,"ml-2","mr-1","text-lg","text-mine-900"],[1,"flex-auto","p-6","-mt-16","bg-mine-200","shadow","sm:p-10","rounded-t-2xl"],[1,"w-full","p-8","md:p-16","shadow","rounded-2xl","bg-card","print:w-auto","print:rounded-none","print:shadow-none","print:bg-transparent"],[1,"flex","items-center","justify-between","mb-5"],[1,"text-2xl","font-semibold","leading-tight"],[1,"-mr-3"],["mat-icon-button","",3,"matMenuTriggerFor"],[1,"icon-size-5",3,"svgIcon"],["listAccountsMenu","matMenu"],["mat-menu-item","",3,"click"],[4,"ngIf"],["noAccounts",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","accounts-grid","md:px-8","text-md","text-secondary","bg-mine-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,"hidden","truncate","sm:block"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","text-center","md:block"],[1,"hidden","text-center","lg:block"],[1,"text-center"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","accounts-grid","md:px-8"],[1,"truncate"],[1,"hidden","text-center","sm:block"],[1,"flex","flex-col","justify-center","gap-1","sm:flex-row"],["mat-stroked-button","","matTooltip","Estado de cuentas",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["mat-stroked-button","","matTooltip","Ver detalles",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["mat-stroked-button","","matTooltip","Editar",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["mat-stroked-button","","matTooltip","Eliminar",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-red-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e.TgZ(4,"div",3),e.TgZ(5,"div"),e.TgZ(6,"a",4),e._uU(7,"Cuentas"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",5),e.TgZ(9,"a",6),e._UZ(10,"mat-icon",7),e.TgZ(11,"span",8),e._uU(12,"Regresar"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",9),e.TgZ(14,"h2",10),e._uU(15," Registro de cuentas "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",11),e.TgZ(17,"button",12),e.NdJ("click",function(){return n.createAccount()}),e._UZ(18,"mat-icon",13),e.TgZ(19,"span",14),e._uU(20,"Nueva"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",15),e.TgZ(22,"div",16),e.TgZ(23,"div",17),e.TgZ(24,"div",18),e._uU(25,"Registro de cuentas"),e.qZA(),e.TgZ(26,"div",19),e.TgZ(27,"button",20),e._UZ(28,"mat-icon",21),e.qZA(),e.TgZ(29,"mat-menu",null,22),e.TgZ(31,"button",23),e.NdJ("click",function(){return n.exportAsExcelFile()}),e._uU(32,"Exportar a excel"),e.qZA(),e.TgZ(33,"button",23),e.NdJ("click",function(){return n.exportAsCsvFile()}),e._uU(34,"Exportar a csv"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(35,Ue,2,2,"ng-container",24),e.ALo(36,"async"),e.YNc(37,Fe,2,0,"ng-template",null,25,e.W1O),e.qZA(),e.qZA(),e.qZA()),2&t){const i=e.MAs(30);e.xp6(9),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(9),e.Q6J("matMenuTriggerFor",i),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:dots-vertical"),e.xp6(7),e.Q6J("ngIf",e.lcZ(36,6,n.accounts$))}},directives:[S.PQ,h.yS,M.Hw,C.lW,f.p6,f.VK,f.OP,m.O5,x.YE,x.nU,m.sg,Te.gM],pipes:[m.Ov,m.JJ,m.uU],encapsulation:2,data:{animation:U.p},changeDetection:0}),o})();var Ie=l(4063),Z=l(7681),k=l(5497);const Je=[{path:"",component:De,resolve:{accounts:Z.$c,users:k.o}},{path:":accountId",component:se,resolve:{account:Z.EW,accounts:Z.$c,operations:Z.$G,users:k.o}},{path:":accountId/statement",component:Ie.N,resolve:{account:Z.EW,users:k.o}}];let Qe=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[h.Bz.forChild(Je),R.m]]}),o})()}}]);